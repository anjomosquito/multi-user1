import{r as c,o as r,b as d,f as t,h as g,v as x,l as b,m as _,j as p,t as a,F as u,i as y,p as f}from"./app-de19c82f.js";import{_ as D}from"./_plugin-vue_export-helper-c27b6911.js";const k={setup(){const i=c(""),s=c(""),l=c("sales"),o=c(null);return{startDate:i,endDate:s,reportType:l,reportData:o,generateReport:async()=>{try{const e=await axios.post(`/reports/${l.value}`,{start_date:i.value,end_date:s.value});o.value=e.data}catch(e){console.error("Error generating report:",e)}},downloadReport:async e=>{try{const m=await axios.post(`/reports/${l.value}/download`,{start_date:i.value,end_date:s.value,format:e},{responseType:"blob"}),w=window.URL.createObjectURL(new Blob([m.data])),n=document.createElement("a");n.href=w,n.setAttribute("download",`${l.value}-report.${e==="pdf"?"pdf":"xlsx"}`),document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(m){console.error("Error downloading report:",m)}}}}},R={class:"py-12"},T={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},C={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-6"},V=t("h2",{class:"text-2xl font-semibold mb-6"},"Sales and Payment Reports",-1),S={class:"mb-6 flex gap-4"},A=t("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1),L=t("label",{class:"block text-sm font-medium text-gray-700"},"End Date",-1),z={class:"mb-6"},B=t("label",{class:"block text-sm font-medium text-gray-700"},"Report Type",-1),E=t("option",{value:"sales"},"Sales Report",-1),F=t("option",{value:"payment"},"Payment Report",-1),U=[E,F],M={class:"flex gap-4 items-center"},O={key:0,class:"flex gap-2"},N=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z","clip-rule":"evenodd"})],-1),P=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z","clip-rule":"evenodd"})],-1),j={key:0,class:"mt-6"},H={key:0},I={class:"bg-gray-100 p-4 rounded-md mb-4"},G=t("h3",{class:"text-lg font-semibold mb-2"},"Summary",-1),q={class:"grid grid-cols-3 gap-4"},J=t("p",{class:"text-sm text-gray-600"},"Total Sales",-1),K={class:"text-lg font-semibold"},Q=t("p",{class:"text-sm text-gray-600"},"Total Orders",-1),W={class:"text-lg font-semibold"},X=t("p",{class:"text-sm text-gray-600"},"Average Order Value",-1),Y={class:"text-lg font-semibold"},Z={class:"overflow-x-auto"},$={class:"min-w-full divide-y divide-gray-200"},tt=t("thead",null,[t("tr",null,[t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Order ID"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Customer"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),t("th",{class:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date")])],-1),et={class:"bg-white divide-y divide-gray-200"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},st={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},at={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},lt={key:1},nt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},it={class:"text-lg font-semibold capitalize mb-2"},ct={class:"space-y-2"},pt={class:"text-gray-600"},mt={class:"text-gray-600"};function gt(i,s,l,o,h,v){return r(),d("div",R,[t("div",T,[t("div",C,[V,t("div",S,[t("div",null,[A,g(t("input",{type:"date","onUpdate:modelValue":s[0]||(s[0]=e=>o.startDate=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[x,o.startDate]])]),t("div",null,[L,g(t("input",{type:"date","onUpdate:modelValue":s[1]||(s[1]=e=>o.endDate=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[x,o.endDate]])])]),t("div",z,[B,g(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>o.reportType=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},U,512),[[b,o.reportType]])]),t("div",M,[t("button",{onClick:s[3]||(s[3]=(...e)=>o.generateReport&&o.generateReport(...e)),class:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700"}," Generate Report "),o.reportData?(r(),d("div",O,[t("button",{onClick:s[4]||(s[4]=e=>o.downloadReport("pdf")),class:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 flex items-center"},[N,_(" Download PDF ")]),t("button",{onClick:s[5]||(s[5]=e=>o.downloadReport("excel")),class:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 flex items-center"},[P,_(" Download Excel ")])])):p("",!0)]),o.reportData?(r(),d("div",j,[o.reportType==="sales"&&o.reportData.sales_data?(r(),d("div",H,[t("div",I,[G,t("div",q,[t("div",null,[J,t("p",K,"₱"+a(o.reportData.summary.total_sales.toFixed(2)),1)]),t("div",null,[Q,t("p",W,a(o.reportData.summary.total_orders),1)]),t("div",null,[X,t("p",Y,"₱"+a(o.reportData.summary.average_order_value.toFixed(2)),1)])])]),t("div",Z,[t("table",$,[tt,t("tbody",et,[(r(!0),d(u,null,y(o.reportData.sales_data,e=>(r(),d("tr",{key:e.id},[t("td",ot,"#"+a(e.id),1),t("td",st,a(e.user),1),t("td",at,"₱"+a(e.total_amount),1),t("td",rt,[t("span",{class:f({"px-2 py-1 rounded-full text-xs font-medium":!0,"bg-green-100 text-green-800":e.payment_status==="paid","bg-yellow-100 text-yellow-800":e.payment_status==="pending","bg-red-100 text-red-800":e.payment_status==="failed"})},a(e.payment_status),3)]),t("td",dt,a(e.created_at),1)]))),128))])])])])):p("",!0),o.reportType==="payment"&&o.reportData.payment_data?(r(),d("div",lt,[t("div",nt,[(r(!0),d(u,null,y(o.reportData.payment_data,e=>(r(),d("div",{key:e.payment_status,class:"bg-white p-4 rounded-lg shadow"},[t("h3",it,a(e.payment_status),1),t("div",ct,[t("p",pt,"Count: "+a(e.count),1),t("p",mt,"Total: ₱"+a(e.total_amount),1)])]))),128))])])):p("",!0)])):p("",!0)])])])}const ut=D(k,[["render",gt]]);export{ut as default};
