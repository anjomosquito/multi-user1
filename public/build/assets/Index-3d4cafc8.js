import{A as E,r as m,x as P,o as n,s as T,e as b,z as g,d as x,u as f,Z as V,f as e,m as $,n as L,h as v,v as w,b as u,j as k,t as a,i as D,p as A,F as S}from"./app-a2ecb7c5.js";import{_ as B}from"./AdminAuthenticatedLayout-8dbc2ec8.js";import F from"./ComprehensiveReport-6b4c708d.js";import{S as l}from"./sweetalert2.esm.all-509645c6.js";import"./ApplicationLogo-7c7b58d1.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-642b6481.js";const O={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 py-12"},U={class:"mb-6 flex justify-between items-center"},j={class:"flex space-x-4"},N={class:"bg-white shadow-sm rounded-lg overflow-hidden p-6 mb-6"},G=e("h3",{class:"text-lg font-semibold mb-4"},"Report Filters",-1),q={class:"flex space-x-4 mb-4"},z={class:"flex-1"},M=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Start Date",-1),I={class:"flex-1"},Q=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"End Date",-1),Z={key:0,class:"mt-6"},H={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},J={class:"bg-white shadow-sm rounded-lg p-6"},K=e("h3",{class:"text-lg font-semibold mb-4"},"Sales Summary",-1),W={class:"grid grid-cols-2 gap-4"},X={class:"bg-gray-50 p-4 rounded-lg"},Y=e("div",{class:"text-sm text-gray-500"},"Total Sales",-1),ee={class:"text-xl font-semibold"},te={class:"bg-gray-50 p-4 rounded-lg"},se=e("div",{class:"text-sm text-gray-500"},"Total Orders",-1),oe={class:"text-xl font-semibold"},ae={class:"bg-gray-50 p-4 rounded-lg"},de=e("div",{class:"text-sm text-gray-500"},"Average Order Value",-1),re={class:"text-xl font-semibold"},ne={class:"bg-gray-50 p-4 rounded-lg"},le=e("div",{class:"text-sm text-gray-500"},"Total Products",-1),ie={class:"text-xl font-semibold"},ce={class:"bg-white shadow-sm rounded-lg p-6"},ue=e("h3",{class:"text-lg font-semibold mb-4"},"Payment Status",-1),_e={class:"space-y-4"},me={class:"flex justify-between items-center"},pe={class:"text-sm text-gray-500"},ge={class:"text-xl font-semibold"},xe={class:"text-right"},he=e("div",{class:"text-sm text-gray-500"},"Total Amount",-1),ye={class:"text-xl font-semibold"},be={class:"bg-white shadow-sm rounded-lg overflow-hidden"},fe=e("h3",{class:"text-lg font-semibold p-6 border-b"},"Sales Details",-1),ve={class:"min-w-full divide-y divide-gray-200"},we=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total Sales"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total Purchases"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total Quantity")])],-1),ke={class:"bg-white divide-y divide-gray-200"},De={class:"px-6 py-4"},Se={class:"px-6 py-4"},Re={class:"px-6 py-4"},Ce={class:"px-6 py-4"},Ee={key:0,class:"text-center py-12"},Pe=e("div",{class:"text-gray-500"},"No reports available",-1),Te=[Pe],je={__name:"Index",props:{reports:{type:Array,required:!0}},setup(h){const o=E({start_date:"2024-01-01",end_date:"2024-12-31"}),p=m({total_sales:"0.00",total_orders:0,average_order_value:"0.00"}),R=m({total_customers:0,total_products:0,top_selling_products:[]}),C=m([]),i=m(null);async function y(){var c,s,t;try{const d=l.fire({title:"Generating Report",text:"Please wait...",allowOutsideClick:!1,didOpen:()=>{l.showLoading()}});if(!o.start_date||!o.end_date){d.close(),l.fire({icon:"error",title:"Validation Error",text:"Please select both start and end dates"});return}if(new Date(o.end_date)<new Date(o.start_date)){d.close(),l.fire({icon:"error",title:"Validation Error",text:"End date cannot be before start date"});return}const[r,Ve]=await Promise.all([g.post("/admin/reports/sales",{start_date:o.start_date,end_date:o.end_date}),g.post("/admin/reports/payments",{start_date:o.start_date,end_date:o.end_date})]);d.close(),i.value=r.data.report_data,l.fire({icon:"success",title:"Report Generated",text:"The report has been generated successfully"})}catch(d){console.error("Error generating report:",d),console.error("Error details:",(c=d.response)==null?void 0:c.data),l.close(),l.fire({icon:"error",title:"Error",text:((t=(s=d.response)==null?void 0:s.data)==null?void 0:t.error)||"An error occurred while generating the report"})}}async function _(c,s){try{const t=await g.post(`/admin/reports/${c}/download`,{start_date:o.start_date+" 00:00:00",end_date:o.end_date+" 23:59:59",format:s},{responseType:"blob"}),d=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=d,r.setAttribute("download",`${c}-report.${s}`),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(d)}catch(t){console.error("Error downloading report:",t)}}return P(()=>{y()}),(c,s)=>(n(),T(B,null,{default:b(()=>[x(f(V),{title:"Purchase Reports"}),e("div",O,[e("div",U,[x(f(L),{href:"/admin/purchase/index",class:"text-white bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-300"},{default:b(()=>[$(" Back ")]),_:1}),e("div",j,[e("button",{onClick:s[0]||(s[0]=t=>_("sales","pdf")),class:"text-white bg-red-500 hover:bg-red-600 px-4 py-2 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-red-300"}," Download Sales PDF "),e("button",{onClick:s[1]||(s[1]=t=>_("sales","excel")),class:"text-white bg-green-500 hover:bg-green-600 px-4 py-2 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-green-300"}," Download Sales Excel "),e("button",{onClick:s[2]||(s[2]=t=>_("payment","pdf")),class:"text-white bg-red-500 hover:bg-red-600 px-4 py-2 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-red-300"}," Download Payment PDF "),e("button",{onClick:s[3]||(s[3]=t=>_("payment","excel")),class:"text-white bg-green-500 hover:bg-green-600 px-4 py-2 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-green-300"}," Download Payment Excel ")])]),e("div",N,[G,e("div",q,[e("div",z,[M,v(e("input",{type:"date","onUpdate:modelValue":s[4]||(s[4]=t=>o.start_date=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[w,o.start_date]])]),e("div",I,[Q,v(e("input",{type:"date","onUpdate:modelValue":s[5]||(s[5]=t=>o.end_date=t),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"},null,512),[[w,o.end_date]])]),e("div",{class:"flex items-end"},[e("button",{onClick:y,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-300"}," Generate Report ")])])]),i.value?(n(),u("div",Z,[x(F,{"executive-summary":i.value.executive_summary,"product-analysis":i.value.product_analysis,"customer-analysis":i.value.customer_analysis,"daily-trends":i.value.daily_trends},null,8,["executive-summary","product-analysis","customer-analysis","daily-trends"])])):k("",!0),e("div",H,[e("div",J,[K,e("div",W,[e("div",X,[Y,e("div",ee,"₱"+a(p.value.total_sales),1)]),e("div",te,[se,e("div",oe,a(p.value.total_orders),1)]),e("div",ae,[de,e("div",re,"₱"+a(p.value.average_order_value),1)]),e("div",ne,[le,e("div",ie,a(R.value.total_products),1)])])]),e("div",ce,[ue,e("div",_e,[(n(!0),u(S,null,D(C.value,t=>(n(),u("div",{key:t.payment_status,class:A([{"bg-yellow-50":t.payment_status==="Pending","bg-green-50":t.payment_status==="Completed","bg-red-50":t.payment_status==="Failed"},"p-4 rounded-lg"])},[e("div",me,[e("div",null,[e("div",pe,a(t.payment_status),1),e("div",ge,a(t.count)+" orders",1)]),e("div",xe,[he,e("div",ye,"₱"+a(t.total_amount),1)])])],2))),128))])])]),e("div",be,[fe,e("table",ve,[we,e("tbody",ke,[(n(!0),u(S,null,D(h.reports,t=>(n(),u("tr",{key:t.date,class:"hover:bg-gray-50"},[e("td",De,a(new Date(t.date).toLocaleDateString()),1),e("td",Se,"₱"+a(t.total_sales),1),e("td",Re,a(t.total_purchases),1),e("td",Ce,a(t.total_quantity),1)]))),128))])]),h.reports.length?k("",!0):(n(),u("div",Ee,Te))])])]),_:1}))}};export{je as default};
