import{r as f,T as V,w as $,o as i,b as a,d as v,u as t,e as k,F as x,Z as F,f as e,n as L,m as U,t as d,j as c,i as w,p as m,k as S,h as u,v as p,l as D,z,O as y}from"./app-de19c82f.js";import{_ as H}from"./AdminAuthenticatedLayout-58f70262.js";import{S as M}from"./sweetalert2.esm.all-509645c6.js";import"./ApplicationLogo-32c770cc.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ResponsiveNavLink-b247280f.js";const O={class:"flex justify-between items-center"},Q=e("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},"Inventory Management",-1),I={class:"flex gap-4"},Y={class:"py-12"},R={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},Z={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"},G={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},J={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"alert"},K={class:"block sm:inline"},W={class:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},X=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"},"Name"),e("th",{scope:"col",class:"px-6 py-3"},"Category"),e("th",{scope:"col",class:"px-6 py-3"},"Low Price"),e("th",{scope:"col",class:"px-6 py-3"},"Median Price"),e("th",{scope:"col",class:"px-6 py-3"},"Highest Price"),e("th",{scope:"col",class:"px-6 py-3"},"Quantity"),e("th",{scope:"col",class:"px-6 py-3"},"Dosage"),e("th",{scope:"col",class:"px-6 py-3"},"Exp Date"),e("th",{scope:"col",class:"px-6 py-3"},"Status"),e("th",{scope:"col",class:"px-6 py-3"},"Actions")])],-1),ee={scope:"row",class:"px-6 py-4 font-medium whitespace-nowrap"},te={class:"px-6 py-4"},se={class:"px-6 py-4"},oe={class:"px-6 py-4"},re={class:"px-6 py-4"},le={class:"px-6 py-4"},de={class:"px-6 py-4"},ie={class:"px-6 py-4"},ae={class:"px-6 py-4"},ne={key:0,class:"block text-sm text-gray-500"},ce={class:"px-6 py-4 space-x-2"},ue=["onClick"],pe=["onClick"],me=["onClick"],xe={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},ye={class:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full"},ge=e("h3",{class:"text-lg font-medium mb-4"},"Add New Medicine",-1),be=e("label",{class:"block text-sm font-medium mb-1"},"Name",-1),_e={key:0,class:"text-red-500 text-sm"},he=e("label",{class:"block text-sm font-medium mb-1"},"Category",-1),fe=e("option",{value:""},"Select Category",-1),ve=["value"],ke={class:"grid grid-cols-3 gap-4"},we=e("label",{class:"block text-sm font-medium mb-1"},"Low Price",-1),Me=["readonly"],qe={key:0,class:"text-red-500 text-sm"},Ce=e("label",{class:"block text-sm font-medium mb-1"},"Median Price",-1),Ee=["readonly"],Ve={key:0,class:"text-red-500 text-sm"},Ue=e("label",{class:"block text-sm font-medium mb-1"},"High Price",-1),Se=["readonly"],De={key:0,class:"text-red-500 text-sm"},Ae=e("label",{class:"block text-sm font-medium mb-1"},"Quantity",-1),Be={key:0,class:"text-red-500 text-sm"},Pe=e("label",{class:"block text-sm font-medium mb-1"},"Dosage",-1),je=["readonly"],Ne={key:0,class:"text-red-500 text-sm"},Te=e("label",{class:"block text-sm font-medium mb-1"},"Expiry Date",-1),$e={key:0,class:"text-red-500 text-sm"},Fe=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Add Medicine ",-1),Le={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4"},ze={class:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full"},He=e("h3",{class:"text-lg font-medium mb-4"},"Edit Medicine",-1),Oe=e("label",{class:"block text-sm font-medium mb-1"},"Name",-1),Qe={key:0,class:"text-red-500 text-sm"},Ie=e("label",{class:"block text-sm font-medium mb-1"},"Category",-1),Ye=e("option",{value:""},"Select Category",-1),Re=["value"],Ze={class:"grid grid-cols-3 gap-4"},Ge=e("label",{class:"block text-sm font-medium mb-1"},"Low Price",-1),Je={key:0,class:"text-red-500 text-sm"},Ke=e("label",{class:"block text-sm font-medium mb-1"},"Median Price",-1),We={key:0,class:"text-red-500 text-sm"},Xe=e("label",{class:"block text-sm font-medium mb-1"},"High Price",-1),et={key:0,class:"text-red-500 text-sm"},tt=e("label",{class:"block text-sm font-medium mb-1"},"Quantity",-1),st={key:0,class:"text-red-500 text-sm"},ot=e("label",{class:"block text-sm font-medium mb-1"},"Dosage",-1),rt={key:0,class:"text-red-500 text-sm"},lt=e("label",{class:"block text-sm font-medium mb-1"},"Expiry Date",-1),dt={key:0,class:"text-red-500 text-sm"},it=e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Update Medicine ",-1),xt={__name:"Index",props:{medicines:Array,categories:Array,errors:Object,success:String},setup(g){const b=f(!1),_=f(!1),h=f(null),o=V({name:"",lprice:"",mprice:"",hprice:"",quantity:"",dosage:"",expdate:"",category_id:"",isExistingMedicine:!1});$(()=>o.name,async n=>{if(n&&n.length>=2)try{const r=await z.get(route("medicines.details",{name:n}));r.data.exists?(o.isExistingMedicine=!0,o.lprice=r.data.lprice,o.mprice=r.data.mprice,o.hprice=r.data.hprice,o.dosage=r.data.dosage):(o.isExistingMedicine=!1,o.lprice="",o.mprice="",o.hprice="",o.dosage="")}catch(r){console.error("Error fetching medicine details:",r)}});const l=V({name:"",lprice:"",mprice:"",hprice:"",quantity:"",dosage:"",expdate:"",category_id:""});function A(){b.value=!0,o.reset()}function q(){b.value=!1,o.reset()}function B(n){h.value=n,l.name=n.name,l.lprice=n.lprice,l.mprice=n.mprice,l.hprice=n.hprice,l.quantity=n.quantity,l.dosage=n.dosage,l.expdate=n.expdate,l.category_id=n.category_id,_.value=!0}function C(){_.value=!1,h.value=null,l.reset()}function P(){o.post(route("admin.inventory.store"),{onSuccess:()=>{q()}})}function j(){l.put(route("admin.inventory.update",h.value.id),{onSuccess:()=>{C()}})}function N(n){n&&M.fire({title:"Are you sure?",text:"You will not be able to recover this medicine!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!"}).then(r=>{r.isConfirmed?y.delete(route("admin.medicines.destroy",n),{onSuccess:()=>{M.fire({title:"Deleted!",text:"The medicine has been deleted.",icon:"success",confirmButtonColor:"#3085d6"}),y.get(route("admin.admininventory.index"))},onError:()=>{M.fire({title:"Error!",text:"Failed to delete the medicine.",icon:"error",confirmButtonColor:"#3085d6"})}}):y.get(route("admin.admininventory"))})}function T(n){y.put(route("admin.inventory.toggle-status",n.id))}return(n,r)=>(i(),a(x,null,[v(t(F),{title:"Inventory Management"}),v(H,null,{header:k(()=>[e("div",O,[Q,e("div",I,[v(t(L),{href:n.route("admin.inventory.report"),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{default:k(()=>[U(" View Reports ")]),_:1},8,["href"]),e("button",{onClick:A,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"}," Add Medicine ")])])]),default:k(()=>[e("div",Y,[e("div",R,[e("div",Z,[e("div",G,[n.$page.props.flash.success?(i(),a("div",J,[e("span",K,d(n.$page.props.flash.success),1)])):c("",!0),e("table",W,[X,e("tbody",null,[(i(!0),a(x,null,w(g.medicines,s=>(i(),a("tr",{key:s.id,class:m({"bg-red-100 dark:bg-red-900":s.status==="disabled","bg-white dark:bg-gray-900":s.status!=="disabled"})},[e("th",ee,d(s.name),1),e("td",te,d(s.category?s.category.name:"Uncategorized"),1),e("td",se,"₱"+d(s.lprice),1),e("td",oe,"₱"+d(s.mprice),1),e("td",re,"₱"+d(s.hprice),1),e("td",le,d(s.quantity),1),e("td",de,d(s.dosage),1),e("td",ie,d(s.expdate),1),e("td",ae,[e("span",{class:m({"text-red-600 dark:text-red-400":s.status==="disabled","text-green-600 dark:text-green-400":s.status!=="disabled"})},[U(d(s.status)+" ",1),s.status_reason?(i(),a("span",ne," ("+d(s.status_reason)+") ",1)):c("",!0)],2)]),e("td",ce,[e("button",{onClick:E=>B(s),class:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300"}," Edit ",8,ue),e("button",{onClick:E=>N(s.id),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}," Delete ",8,pe),s.status==="disabled"&&s.quantity>0?(i(),a("button",{key:0,onClick:E=>T(s),class:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}," Enable ",8,me)):c("",!0)])],2))),128))])])])])])]),b.value?(i(),a("div",xe,[e("div",ye,[ge,e("form",{onSubmit:S(P,["prevent"]),class:"space-y-4"},[e("div",null,[be,u(e("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>t(o).name=s),type:"text",class:"w-full rounded-md",required:""},null,512),[[p,t(o).name]]),t(o).errors.name?(i(),a("div",_e,d(t(o).errors.name),1)):c("",!0)]),e("div",null,[he,u(e("select",{"onUpdate:modelValue":r[1]||(r[1]=s=>t(o).category_id=s),class:"w-full rounded-md"},[fe,(i(!0),a(x,null,w(g.categories,s=>(i(),a("option",{key:s.id,value:s.id},d(s.name),9,ve))),128))],512),[[D,t(o).category_id]])]),e("div",ke,[e("div",null,[we,u(e("input",{"onUpdate:modelValue":r[2]||(r[2]=s=>t(o).lprice=s),type:"number",step:"0.01",class:m(["w-full rounded-md",{"bg-gray-100":t(o).isExistingMedicine}]),readonly:t(o).isExistingMedicine,required:""},null,10,Me),[[p,t(o).lprice]]),t(o).errors.lprice?(i(),a("div",qe,d(t(o).errors.lprice),1)):c("",!0)]),e("div",null,[Ce,u(e("input",{"onUpdate:modelValue":r[3]||(r[3]=s=>t(o).mprice=s),type:"number",step:"0.01",class:m(["w-full rounded-md",{"bg-gray-100":t(o).isExistingMedicine}]),readonly:t(o).isExistingMedicine,required:""},null,10,Ee),[[p,t(o).mprice]]),t(o).errors.mprice?(i(),a("div",Ve,d(t(o).errors.mprice),1)):c("",!0)]),e("div",null,[Ue,u(e("input",{"onUpdate:modelValue":r[4]||(r[4]=s=>t(o).hprice=s),type:"number",step:"0.01",class:m(["w-full rounded-md",{"bg-gray-100":t(o).isExistingMedicine}]),readonly:t(o).isExistingMedicine,required:""},null,10,Se),[[p,t(o).hprice]]),t(o).errors.hprice?(i(),a("div",De,d(t(o).errors.hprice),1)):c("",!0)])]),e("div",null,[Ae,u(e("input",{"onUpdate:modelValue":r[5]||(r[5]=s=>t(o).quantity=s),type:"number",class:"w-full rounded-md",required:""},null,512),[[p,t(o).quantity]]),t(o).errors.quantity?(i(),a("div",Be,d(t(o).errors.quantity),1)):c("",!0)]),e("div",null,[Pe,u(e("input",{"onUpdate:modelValue":r[6]||(r[6]=s=>t(o).dosage=s),type:"text",class:m(["w-full rounded-md",{"bg-gray-100":t(o).isExistingMedicine}]),readonly:t(o).isExistingMedicine,required:""},null,10,je),[[p,t(o).dosage]]),t(o).errors.dosage?(i(),a("div",Ne,d(t(o).errors.dosage),1)):c("",!0)]),e("div",null,[Te,u(e("input",{"onUpdate:modelValue":r[7]||(r[7]=s=>t(o).expdate=s),type:"date",class:"w-full rounded-md",required:""},null,512),[[p,t(o).expdate]]),t(o).errors.expdate?(i(),a("div",$e,d(t(o).errors.expdate),1)):c("",!0)]),e("div",{class:"flex justify-end space-x-3"},[e("button",{type:"button",onClick:q,class:"px-4 py-2 border rounded-md hover:bg-gray-100 dark:hover:bg-gray-700"}," Cancel "),Fe])],32)])])):c("",!0),_.value?(i(),a("div",Le,[e("div",ze,[He,e("form",{onSubmit:S(j,["prevent"]),class:"space-y-4"},[e("div",null,[Oe,u(e("input",{"onUpdate:modelValue":r[8]||(r[8]=s=>t(l).name=s),type:"text",class:"w-full rounded-md",required:""},null,512),[[p,t(l).name]]),t(l).errors.name?(i(),a("div",Qe,d(t(l).errors.name),1)):c("",!0)]),e("div",null,[Ie,u(e("select",{"onUpdate:modelValue":r[9]||(r[9]=s=>t(l).category_id=s),class:"w-full rounded-md"},[Ye,(i(!0),a(x,null,w(g.categories,s=>(i(),a("option",{key:s.id,value:s.id},d(s.name),9,Re))),128))],512),[[D,t(l).category_id]])]),e("div",Ze,[e("div",null,[Ge,u(e("input",{"onUpdate:modelValue":r[10]||(r[10]=s=>t(l).lprice=s),type:"number",step:"0.01",class:"w-full rounded-md",required:""},null,512),[[p,t(l).lprice]]),t(l).errors.lprice?(i(),a("div",Je,d(t(l).errors.lprice),1)):c("",!0)]),e("div",null,[Ke,u(e("input",{"onUpdate:modelValue":r[11]||(r[11]=s=>t(l).mprice=s),type:"number",step:"0.01",class:"w-full rounded-md",required:""},null,512),[[p,t(l).mprice]]),t(l).errors.mprice?(i(),a("div",We,d(t(l).errors.mprice),1)):c("",!0)]),e("div",null,[Xe,u(e("input",{"onUpdate:modelValue":r[12]||(r[12]=s=>t(l).hprice=s),type:"number",step:"0.01",class:"w-full rounded-md",required:""},null,512),[[p,t(l).hprice]]),t(l).errors.hprice?(i(),a("div",et,d(t(l).errors.hprice),1)):c("",!0)])]),e("div",null,[tt,u(e("input",{"onUpdate:modelValue":r[13]||(r[13]=s=>t(l).quantity=s),type:"number",class:"w-full rounded-md",required:""},null,512),[[p,t(l).quantity]]),t(l).errors.quantity?(i(),a("div",st,d(t(l).errors.quantity),1)):c("",!0)]),e("div",null,[ot,u(e("input",{"onUpdate:modelValue":r[14]||(r[14]=s=>t(l).dosage=s),type:"text",class:"w-full rounded-md",required:""},null,512),[[p,t(l).dosage]]),t(l).errors.dosage?(i(),a("div",rt,d(t(l).errors.dosage),1)):c("",!0)]),e("div",null,[lt,u(e("input",{"onUpdate:modelValue":r[15]||(r[15]=s=>t(l).expdate=s),type:"date",class:"w-full rounded-md",required:""},null,512),[[p,t(l).expdate]]),t(l).errors.expdate?(i(),a("div",dt,d(t(l).errors.expdate),1)):c("",!0)]),e("div",{class:"flex justify-end space-x-3"},[e("button",{type:"button",onClick:C,class:"px-4 py-2 border rounded-md hover:bg-gray-100 dark:hover:bg-gray-700"}," Cancel "),it])],32)])])):c("",!0)]),_:1})],64))}};export{xt as default};
