import{r as ue,q as Te,o as q,b as X,f as k,p as pe,h as we,v as Ee,t as ie,j as J,m as ye,z as De,c as ke,g as Me,s as Ce,e as Re,d as Se,u as Pe,Z as Ne,i as Oe,F as ge,O as xe,E as ze,G as je}from"./app-a2ecb7c5.js";import{_ as Ie}from"./AdminAuthenticatedLayout-8dbc2ec8.js";import{_ as Ue}from"./ReceiptModal-e46332fa.js";import{_ as Le}from"./Modal-a3f7efdc.js";import{S as ae}from"./sweetalert2.esm.all-509645c6.js";import{_ as Be}from"./_plugin-vue_export-helper-c27b6911.js";import"./ApplicationLogo-7c7b58d1.js";import"./ResponsiveNavLink-642b6481.js";const Fe={class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},We={class:"flex items-center justify-center min-h-screen"},Ge=k("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Ve={class:"relative bg-white rounded-lg w-full max-w-md mx-4"},$e={class:"p-6"},He=k("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Generate Report",-1),qe={class:"mb-4"},Xe=k("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Report Type",-1),Ye={class:"grid grid-cols-2 gap-4"},Ke={class:"mb-4"},Qe=k("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Format",-1),Ze={class:"grid grid-cols-3 gap-4"},Je={class:"mb-4"},et=k("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date Range",-1),tt={class:"grid grid-cols-2 gap-4"},rt=k("label",{class:"block text-xs text-gray-500 mb-1"},"Start Date",-1),nt=k("label",{class:"block text-xs text-gray-500 mb-1"},"End Date",-1),ot={key:0,class:"mb-4 text-sm text-red-600"},it={class:"mt-6 flex justify-end space-x-3"},at=["disabled"],ut={key:0,class:"flex items-center"},st=k("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[k("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),k("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ct={key:1},lt={__name:"ReportModal",props:{show:{type:Boolean,default:!1}},emits:["close","success"],setup(fe,{emit:_e}){const le=_e,h=ue("sales"),y=ue("pdf"),i=ue(new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().split("T")[0]),e=ue(new Date().toISOString().split("T")[0]),c=ue(!1),s=ue(""),a=Te(()=>!(!h.value||!y.value||!i.value||!e.value||new Date(e.value)<new Date(i.value))),o=async t=>{const r=document.createElement("iframe");r.style.display="none",document.body.appendChild(r);try{r.src=t,await new Promise((f,l)=>{r.onload=f,r.onerror=l,setTimeout(l,5e3)}),r.contentWindow.print(),setTimeout(()=>{document.body.removeChild(r)},1e3)}catch{throw document.body.removeChild(r),new Error("Failed to load report for printing. Please try again.")}},n=async()=>{var t,r,u;if(a.value){s.value="",c.value=!0;try{const f=h.value==="sales"?route("admin.reports.sales.download"):route("admin.reports.payments.download"),l=await De.post(f,{start_date:i.value,end_date:e.value,format:y.value},{responseType:y.value==="print"?"json":"blob"});if(y.value==="print"){await o(l.data.url),le("success","Report generated successfully");return}const d=new Blob([l.data],{type:y.value==="pdf"?"application/pdf":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),p=window.URL.createObjectURL(d),v=document.createElement("a");v.href=p,v.download=`${h.value}_report.${y.value}`,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(p),le("success","Report generated successfully")}catch(f){console.error("Report generation error:",f);let l="Error generating report. Please try again.";if((t=f.response)!=null&&t.data)try{const d=new FileReader;d.onload=()=>{try{const p=JSON.parse(d.result);s.value=p.error||p.message||l}catch{s.value=l}},d.readAsText(f.response.data)}catch{s.value=((r=f.response.data)==null?void 0:r.error)||((u=f.response.data)==null?void 0:u.message)||l}else s.value=l}finally{c.value=!1}}};return(t,r)=>(q(),X("div",Fe,[k("div",We,[Ge,k("div",Ve,[k("div",$e,[He,k("div",qe,[Xe,k("div",Ye,[k("button",{onClick:r[0]||(r[0]=u=>h.value="sales"),class:pe(["py-2 px-4 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2",h.value==="sales"?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-900 hover:bg-gray-200"])}," Sales Report ",2),k("button",{onClick:r[1]||(r[1]=u=>h.value="payment"),class:pe(["py-2 px-4 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2",h.value==="payment"?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-900 hover:bg-gray-200"])}," Payment Report ",2)])]),k("div",Ke,[Qe,k("div",Ze,[k("button",{onClick:r[2]||(r[2]=u=>y.value="pdf"),class:pe(["py-2 px-4 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2",y.value==="pdf"?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-900 hover:bg-gray-200"])}," PDF ",2),k("button",{onClick:r[3]||(r[3]=u=>y.value="xlsx"),class:pe(["py-2 px-4 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2",y.value==="xlsx"?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-900 hover:bg-gray-200"])}," Excel ",2),k("button",{onClick:r[4]||(r[4]=u=>y.value="print"),class:pe(["py-2 px-4 rounded-md text-sm font-medium focus:outline-none focus:ring-2 focus:ring-offset-2",y.value==="print"?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-900 hover:bg-gray-200"])}," Print ",2)])]),k("div",Je,[et,k("div",tt,[k("div",null,[rt,we(k("input",{type:"date","onUpdate:modelValue":r[5]||(r[5]=u=>i.value=u),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[Ee,i.value]])]),k("div",null,[nt,we(k("input",{type:"date","onUpdate:modelValue":r[6]||(r[6]=u=>e.value=u),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[Ee,e.value]])])])]),s.value?(q(),X("div",ot,ie(s.value),1)):J("",!0),k("div",it,[k("button",{onClick:r[7]||(r[7]=u=>t.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Cancel "),k("button",{onClick:n,disabled:c.value||!a.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[c.value?(q(),X("span",ut,[st,ye(" Generating... ")])):(q(),X("span",ct,"Generate Report"))],8,at)])])])])]))}};var Ae={exports:{}};(function(fe,_e){(function(le,h){fe.exports=h(h.toString()).default})(ke,function(le){return function(h){function y(e){if(i[e])return i[e].exports;var c=i[e]={i:e,l:!1,exports:{}};return h[e].call(c.exports,c,c.exports,y),c.l=!0,c.exports}var i={};return y.m=h,y.c=i,y.i=function(e){return e},y.d=function(e,c,s){y.o(e,c)||Object.defineProperty(e,c,{configurable:!1,enumerable:!0,get:s})},y.n=function(e){var c=e&&e.__esModule?function(){return e.default}:function(){return e};return y.d(c,"a",c),c},y.o=function(e,c){return Object.prototype.hasOwnProperty.call(e,c)},y.p="/",y(y.s=166)}([function(h,y){function i(e){var c=typeof e;return e!=null&&(c=="object"||c=="function")}h.exports=i},function(h,y,i){function e(s,a){return this._row=[],this.config=s||{},this.supplements=a,this}var c=i(3);e.prototype._nextUnset=function(s,a){var o;for(a===void 0&&(a=0),o=a;o<s.length;o++)if(!s[o])return o;return s.length},e.prototype._matchPattern=function(s,a,o){var n,t,r,u,f=0,l=0,d=0,p=0;for(o=o||this.SINGLE_CODE_ERROR||1,n=0;n<s.length;n++)d+=s[n],p+=a[n];if(d<p)return Number.MAX_VALUE;for(t=d/p,o*=t,n=0;n<s.length;n++){if(r=s[n],u=a[n]*t,(l=Math.abs(r-u)/u)>o)return Number.MAX_VALUE;f+=l}return f/p},e.prototype._nextSet=function(s,a){var o;for(a=a||0,o=a;o<s.length;o++)if(s[o])return o;return s.length},e.prototype._correctBars=function(s,a,o){for(var n=o.length,t=0;n--;)(t=s[o[n]]*(1-(1-a)/2))>1&&(s[o[n]]=t)},e.prototype._matchTrace=function(s,a){var o,n,t=[],r=this,u=r._nextSet(r._row),f=!r._row[u],l=0,d={error:Number.MAX_VALUE,code:-1,start:0};if(s){for(o=0;o<s.length;o++)t.push(0);for(o=u;o<r._row.length;o++)if(r._row[o]^f)t[l]++;else{if(l===t.length-1)return n=r._matchPattern(t,s),n<a?(d.start=o-u,d.end=o,d.counter=t,d):null;l++,t[l]=1,f=!f}}else for(t.push(0),o=u;o<r._row.length;o++)r._row[o]^f?t[l]++:(l++,t.push(0),t[l]=1,f=!f);return d.start=u,d.end=r._row.length-1,d.counter=t,d},e.prototype.decodePattern=function(s){var a,o=this;return o._row=s,a=o._decode(),a===null?(o._row.reverse(),(a=o._decode())&&(a.direction=e.DIRECTION.REVERSE,a.start=o._row.length-a.start,a.end=o._row.length-a.end)):a.direction=e.DIRECTION.FORWARD,a&&(a.format=o.FORMAT),a},e.prototype._matchRange=function(s,a,o){var n;for(s=s<0?0:s,n=s;n<a;n++)if(this._row[n]!==o)return!1;return!0},e.prototype._fillCounters=function(s,a,o){var n,t=this,r=0,u=[];for(o=o===void 0||o,s=s!==void 0?s:t._nextUnset(t._row),a=a||t._row.length,u[r]=0,n=s;n<a;n++)t._row[n]^o?u[r]++:(r++,u[r]=1,o=!o);return u},e.prototype._toCounters=function(s,a){var o,n=this,t=a.length,r=n._row.length,u=!n._row[s],f=0;for(c.a.init(a,0),o=s;o<r;o++)if(n._row[o]^u)a[f]++;else{if(++f===t)break;a[f]=1,u=!u}return a},Object.defineProperty(e.prototype,"FORMAT",{value:"unknown",writeable:!1}),e.DIRECTION={FORWARD:1,REVERSE:-1},e.Exception={StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"},e.CONFIG_KEYS={},y.a=e},function(h,y){var i=Array.isArray;h.exports=i},function(h,y,i){y.a={init:function(e,c){for(var s=e.length;s--;)e[s]=c},shuffle:function(e){var c,s,a=e.length-1;for(a;a>=0;a--)c=Math.floor(Math.random()*a),s=e[a],e[a]=e[c],e[c]=s;return e},toPointList:function(e){var c,s,a=[],o=[];for(c=0;c<e.length;c++){for(a=[],s=0;s<e[c].length;s++)a[s]=e[c][s];o[c]="["+a.join(",")+"]"}return"["+o.join(`,\r
`)+"]"},threshold:function(e,c,s){var a,o=[];for(a=0;a<e.length;a++)s.apply(e,[e[a]])>=c&&o.push(e[a]);return o},maxIndex:function(e){var c,s=0;for(c=0;c<e.length;c++)e[c]>e[s]&&(s=c);return s},max:function(c){var s,a=0;for(s=0;s<c.length;s++)c[s]>a&&(a=c[s]);return a},sum:function(c){for(var s=c.length,a=0;s--;)a+=c[s];return a}}},function(h,y,i){function e(r,u){r=a()(c(),r),o.a.call(this,r,u)}function c(){var r={};return Object.keys(e.CONFIG_KEYS).forEach(function(u){r[u]=e.CONFIG_KEYS[u].default}),r}var s=i(28),a=i.n(s),o=i(1),n=Object.assign||function(r){for(var u=1;u<arguments.length;u++){var f=arguments[u];for(var l in f)Object.prototype.hasOwnProperty.call(f,l)&&(r[l]=f[l])}return r},t={CODE_L_START:{value:0},CODE_G_START:{value:10},START_PATTERN:{value:[1,1,1]},STOP_PATTERN:{value:[1,1,1]},MIDDLE_PATTERN:{value:[1,1,1,1,1]},EXTENSION_START_PATTERN:{value:[1,1,2]},CODE_PATTERN:{value:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]]},CODE_FREQUENCY:{value:[0,11,13,14,19,25,28,21,22,26]},SINGLE_CODE_ERROR:{value:.7},AVG_CODE_ERROR:{value:.48},FORMAT:{value:"ean_13",writeable:!1}};e.prototype=Object.create(o.a.prototype,t),e.prototype.constructor=e,e.prototype._decodeCode=function(r,u){var f,l,d,p=[0,0,0,0],v=this,_=r,x=!v._row[_],g=0,b={error:Number.MAX_VALUE,code:-1,start:r,end:r};for(u||(u=v.CODE_PATTERN.length),f=_;f<v._row.length;f++)if(v._row[f]^x)p[g]++;else{if(g===p.length-1){for(l=0;l<u;l++)(d=v._matchPattern(p,v.CODE_PATTERN[l]))<b.error&&(b.code=l,b.error=d);return b.end=f,b.error>v.AVG_CODE_ERROR?null:b}g++,p[g]=1,x=!x}return null},e.prototype._findPattern=function(r,u,f,l,d){var p,v,_,x,g=[],b=this,C=0,S={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(u||(u=b._nextSet(b._row)),f===void 0&&(f=!1),l===void 0&&(l=!0),d===void 0&&(d=b.AVG_CODE_ERROR),p=0;p<r.length;p++)g[p]=0;for(p=u;p<b._row.length;p++)if(b._row[p]^f)g[C]++;else{if(C===g.length-1){for(x=0,_=0;_<g.length;_++)x+=g[_];if((v=b._matchPattern(g,r))<d)return S.error=v,S.start=p-x,S.end=p,S;if(!l)return null;for(_=0;_<g.length-2;_++)g[_]=g[_+2];g[g.length-2]=0,g[g.length-1]=0,C--}else C++;g[C]=1,f=!f}return null},e.prototype._findStart=function(){for(var r,u,f=this,l=f._nextSet(f._row);!u;){if(!(u=f._findPattern(f.START_PATTERN,l)))return null;if((r=u.start-(u.end-u.start))>=0&&f._matchRange(r,u.start,0))return u;l=u.end,u=null}},e.prototype._verifyTrailingWhitespace=function(r){var u,f=this;return u=r.end+(r.end-r.start),u<f._row.length&&f._matchRange(r.end,u,0)?r:null},e.prototype._findEnd=function(r,u){var f=this,l=f._findPattern(f.STOP_PATTERN,r,u,!1);return l!==null?f._verifyTrailingWhitespace(l):null},e.prototype._calculateFirstDigit=function(r){var u,f=this;for(u=0;u<f.CODE_FREQUENCY.length;u++)if(r===f.CODE_FREQUENCY[u])return u;return null},e.prototype._decodePayload=function(r,u,f){var l,d,p=this,v=0;for(l=0;l<6;l++){if(!(r=p._decodeCode(r.end)))return null;r.code>=p.CODE_G_START?(r.code=r.code-p.CODE_G_START,v|=1<<5-l):v|=0<<5-l,u.push(r.code),f.push(r)}if((d=p._calculateFirstDigit(v))===null||(u.unshift(d),(r=p._findPattern(p.MIDDLE_PATTERN,r.end,!0,!1))===null))return null;for(f.push(r),l=0;l<6;l++){if(!(r=p._decodeCode(r.end,p.CODE_G_START)))return null;f.push(r),u.push(r.code)}return r},e.prototype._decode=function(){var r,u,f=this,l=[],d=[],p={};if(!(r=f._findStart())||(u={code:r.code,start:r.start,end:r.end},d.push(u),!(u=f._decodePayload(u,l,d)))||!(u=f._findEnd(u.end,!1))||(d.push(u),!f._checksum(l)))return null;if(this.supplements.length>0){var v=this._decodeExtensions(u.end);if(!v)return null;var _=v.decodedCodes[v.decodedCodes.length-1],x={start:_.start+((_.end-_.start)/2|0),end:_.end};if(!f._verifyTrailingWhitespace(x))return null;p={supplement:v,code:l.join("")+v.code}}return n({code:l.join(""),start:r.start,end:u.end,codeset:"",startInfo:r,decodedCodes:d},p)},e.prototype._decodeExtensions=function(r){var u,f,l=this._nextSet(this._row,r),d=this._findPattern(this.EXTENSION_START_PATTERN,l,!1,!1);if(d===null)return null;for(u=0;u<this.supplements.length;u++)if((f=this.supplements[u].decode(this._row,d.end))!==null)return{code:f.code,start:l,startInfo:d,end:f.end,codeset:"",decodedCodes:f.decodedCodes};return null},e.prototype._checksum=function(r){var u,f=0;for(u=r.length-2;u>=0;u-=2)f+=r[u];for(f*=3,u=r.length-1;u>=0;u-=2)f+=r[u];return f%10==0},e.CONFIG_KEYS={supplements:{type:"arrayOf(string)",default:[],description:"Allowed extensions to be decoded (2 and/or 5)"}},y.a=e},function(h,y,i){var e=i(38),c=typeof self=="object"&&self&&self.Object===Object&&self,s=e||c||Function("return this")();h.exports=s},function(h,y){function i(e){return e!=null&&typeof e=="object"}h.exports=i},function(h,y){function i(e){var c=new Float32Array(2);return c[0]=e[0],c[1]=e[1],c}h.exports=i},function(h,y,i){function e(r){return r==null?r===void 0?n:o:t&&t in Object(r)?s(r):a(r)}var c=i(11),s=i(119),a=i(146),o="[object Null]",n="[object Undefined]",t=c?c.toStringTag:void 0;h.exports=e},function(h,y,i){y.a={drawRect:function(e,c,s,a){s.strokeStyle=a.color,s.fillStyle=a.color,s.lineWidth=1,s.beginPath(),s.strokeRect(e.x,e.y,c.x,c.y)},drawPath:function(e,c,s,a){s.strokeStyle=a.color,s.fillStyle=a.color,s.lineWidth=a.lineWidth,s.beginPath(),s.moveTo(e[0][c.x],e[0][c.y]);for(var o=1;o<e.length;o++)s.lineTo(e[o][c.x],e[o][c.y]);s.closePath(),s.stroke()},drawImage:function(e,c,s){var a,o=s.getImageData(0,0,c.x,c.y),n=o.data,t=e.length,r=n.length;if(r/t!=4)return!1;for(;t--;)a=e[t],n[--r]=255,n[--r]=a,n[--r]=a,n[--r]=a;return s.putImageData(o,0,0),!0}}},function(h,y,i){function e(t){var r=-1,u=t==null?0:t.length;for(this.clear();++r<u;){var f=t[r];this.set(f[0],f[1])}}var c=i(133),s=i(134),a=i(135),o=i(136),n=i(137);e.prototype.clear=c,e.prototype.delete=s,e.prototype.get=a,e.prototype.has=o,e.prototype.set=n,h.exports=e},function(h,y,i){var e=i(5),c=e.Symbol;h.exports=c},function(h,y,i){function e(s,a){for(var o=s.length;o--;)if(c(s[o][0],a))return o;return-1}var c=i(17);h.exports=e},function(h,y,i){function e(n,t){return c(n)?n:s(n,t)?[n]:a(o(n))}var c=i(2),s=i(130),a=i(154),o=i(165);h.exports=e},function(h,y,i){function e(s,a){var o=s.__data__;return c(a)?o[typeof a=="string"?"string":"hash"]:o.map}var c=i(131);h.exports=e},function(h,y){function i(s,a){return!!(a=a??e)&&(typeof s=="number"||c.test(s))&&s>-1&&s%1==0&&s<a}var e=9007199254740991,c=/^(?:0|[1-9]\d*)$/;h.exports=i},function(h,y,i){var e=i(22),c=e(Object,"create");h.exports=c},function(h,y){function i(e,c){return e===c||e!==e&&c!==c}h.exports=i},function(h,y,i){var e=i(96),c=i(6),s=Object.prototype,a=s.hasOwnProperty,o=s.propertyIsEnumerable,n=e(function(){return arguments}())?e:function(t){return c(t)&&a.call(t,"callee")&&!o.call(t,"callee")};h.exports=n},function(h,y,i){function e(w,m){return{x:w,y:m,toVec2:function(){return C.clone([this.x,this.y])},toVec3:function(){return S.clone([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}}}function c(w,m,O){O||(O=w);for(var T=w.data,A=T.length,R=O.data;A--;)R[A]=T[A]<m?1:0}function s(w,m){m||(m=8);for(var O=w.data,T=O.length,A=8-m,R=1<<m,D=new Int32Array(R);T--;)D[O[T]>>A]++;return D}function a(w,m){function O(j,N){var z,F=0;for(z=j;z<=N;z++)F+=R[z];return F}function T(j,N){var z,F=0;for(z=j;z<=N;z++)F+=z*R[z];return F}function A(){var j,N,z,F,oe,Q,P,U=[0],I=(1<<m)-1;for(R=s(w,m),F=1;F<I;F++)j=O(0,F),N=O(F+1,I),z=j*N,z===0&&(z=1),oe=T(0,F)*N,Q=T(F+1,I)*j,P=oe-Q,U[F]=P*P/z;return b.a.maxIndex(U)}m||(m=8);var R,D=8-m;return A()<<D}function o(w,m){var O=a(w);return c(w,O,m),O}function n(w,m,O){function T(z){var F=!1;for(R=0;R<N.length;R++)D=N[R],D.fits(z)&&(D.add(z),F=!0);return F}var A,R,D,j,N=[];for(O||(O="rad"),A=0;A<w.length;A++)j=g.a.createPoint(w[A],A,O),T(j)||N.push(g.a.create(j,m));return N}function t(w,m,O){var T,A,R,D,j=0,N=0,z=[];for(T=0;T<m;T++)z[T]={score:0,item:null};for(T=0;T<w.length;T++)if((A=O.apply(this,[w[T]]))>N)for(R=z[j],R.score=A,R.item=w[T],N=Number.MAX_VALUE,D=0;D<m;D++)z[D].score<N&&(N=z[D].score,j=D);return z}function r(w,m,O){for(var T,A=0,R=m.x,D=Math.floor(w.length/4),j=m.x/2,N=0,z=m.x;R<D;){for(T=0;T<j;T++)O[N]=(.299*w[4*A+0]+.587*w[4*A+1]+.114*w[4*A+2]+(.299*w[4*(A+1)+0]+.587*w[4*(A+1)+1]+.114*w[4*(A+1)+2])+(.299*w[4*R+0]+.587*w[4*R+1]+.114*w[4*R+2])+(.299*w[4*(R+1)+0]+.587*w[4*(R+1)+1]+.114*w[4*(R+1)+2]))/4,N++,A+=2,R+=2;A+=z,R+=z}}function u(w,m,O){var T,A=w.length/4|0;if(O&&O.singleChannel===!0)for(T=0;T<A;T++)m[T]=w[4*T+0];else for(T=0;T<A;T++)m[T]=.299*w[4*T+0]+.587*w[4*T+1]+.114*w[4*T+2]}function f(w,m){for(var O=w.data,T=w.size.x,A=m.data,R=0,D=T,j=O.length,N=T/2,z=0;D<j;){for(var F=0;F<N;F++)A[z]=Math.floor((O[R]+O[R+1]+O[D]+O[D+1])/4),z++,R+=2,D+=2;R+=T,D+=T}}function l(w,m){var O=w[0],T=w[1],A=w[2],R=A*T,D=R*(1-Math.abs(O/60%2-1)),j=A-R,N=0,z=0,F=0;return m=m||[0,0,0],O<60?(N=R,z=D):O<120?(N=D,z=R):O<180?(z=R,F=D):O<240?(z=D,F=R):O<300?(N=D,F=R):O<360&&(N=R,F=D),m[0]=255*(N+j)|0,m[1]=255*(z+j)|0,m[2]=255*(F+j)|0,m}function d(w){var m,O=[],T=[];for(m=1;m<Math.sqrt(w)+1;m++)w%m==0&&(T.push(m),m!==w/m&&O.unshift(Math.floor(w/m)));return T.concat(O)}function p(w,m){for(var O=0,T=0,A=[];O<w.length&&T<m.length;)w[O]===m[T]?(A.push(w[O]),O++,T++):w[O]>m[T]?T++:O++;return A}function v(w,m){function O(P){for(var U=0,I=P[Math.floor(P.length/2)];U<P.length-1&&P[U]<Q;)U++;return U>0&&(I=Math.abs(P[U]-Q)>Math.abs(P[U-1]-Q)?P[U-1]:P[U]),Q/I<N[F+1]/N[F]&&Q/I>N[F-1]/N[F]?{x:I,y:I}:null}var T,A=d(m.x),R=d(m.y),D=Math.max(m.x,m.y),j=p(A,R),N=[8,10,15,20,32,60,80],z={"x-small":5,small:4,medium:3,large:2,"x-large":1},F=z[w]||z.medium,oe=N[F],Q=Math.floor(D/oe);return T=O(j),T||(T=O(d(D)))||(T=O(d(Q*oe))),T}function _(w){return{value:parseFloat(w),unit:(w.indexOf("%"),w.length,"%")}}function x(w,m,O){var T={width:w,height:m},A=Object.keys(O).reduce(function(R,D){var j=O[D],N=_(j),z=M[D](N,T);return R[D]=z,R},{});return{sx:A.left,sy:A.top,sw:A.right-A.left,sh:A.bottom-A.top}}var g=i(50),b=i(3);y.b=e,y.f=o,y.g=n,y.h=t,y.c=r,y.d=u,y.i=f,y.a=l,y.e=v,y.j=x;var C={clone:i(7)},S={clone:i(83)},M={top:function(w,m){if(w.unit==="%")return Math.floor(m.height*(w.value/100))},right:function(w,m){if(w.unit==="%")return Math.floor(m.width-m.width*(w.value/100))},bottom:function(w,m){if(w.unit==="%")return Math.floor(m.height-m.height*(w.value/100))},left:function(w,m){if(w.unit==="%")return Math.floor(m.width*(w.value/100))}}},function(h,y,i){function e(n,t,r,u){t?this.data=t:r?(this.data=new r(n.x*n.y),r===Array&&u&&a.a.init(this.data,0)):(this.data=new Uint8Array(n.x*n.y),Uint8Array===Array&&u&&a.a.init(this.data,0)),this.size=n}var c=i(53),s=i(19),a=i(3),o={clone:i(7)};e.prototype.inImageWithBorder=function(n,t){return n.x>=t&&n.y>=t&&n.x<this.size.x-t&&n.y<this.size.y-t},e.sample=function(n,t,r){var u=Math.floor(t),f=Math.floor(r),l=n.size.x,d=f*n.size.x+u,p=n.data[d+0],v=n.data[d+1],_=n.data[d+l],x=n.data[d+l+1],g=p-v;return t-=u,r-=f,Math.floor(t*(r*(g-_+x)-g)+r*(_-p)+p)},e.clearArray=function(n){for(var t=n.length;t--;)n[t]=0},e.prototype.subImage=function(n,t){return new c.a(n,t,this)},e.prototype.subImageAsCopy=function(n,t){var r,u,f=n.size.y,l=n.size.x;for(r=0;r<l;r++)for(u=0;u<f;u++)n.data[u*l+r]=this.data[(t.y+u)*this.size.x+t.x+r]},e.prototype.copyTo=function(n){for(var t=this.data.length,r=this.data,u=n.data;t--;)u[t]=r[t]},e.prototype.get=function(n,t){return this.data[t*this.size.x+n]},e.prototype.getSafe=function(n,t){var r;if(!this.indexMapping){for(this.indexMapping={x:[],y:[]},r=0;r<this.size.x;r++)this.indexMapping.x[r]=r,this.indexMapping.x[r+this.size.x]=r;for(r=0;r<this.size.y;r++)this.indexMapping.y[r]=r,this.indexMapping.y[r+this.size.y]=r}return this.data[this.indexMapping.y[t+this.size.y]*this.size.x+this.indexMapping.x[n+this.size.x]]},e.prototype.set=function(n,t,r){return this.data[t*this.size.x+n]=r,this},e.prototype.zeroBorder=function(){var n,t=this.size.x,r=this.size.y,u=this.data;for(n=0;n<t;n++)u[n]=u[(r-1)*t+n]=0;for(n=1;n<r-1;n++)u[n*t]=u[n*t+(t-1)]=0},e.prototype.invert=function(){for(var n=this.data,t=n.length;t--;)n[t]=n[t]?0:1},e.prototype.convolve=function(n){var t,r,u,f,l=n.length/2|0,d=0;for(r=0;r<this.size.y;r++)for(t=0;t<this.size.x;t++){for(d=0,f=-l;f<=l;f++)for(u=-l;u<=l;u++)d+=n[f+l][u+l]*this.getSafe(t+u,r+f);this.data[r*this.size.x+t]=d}},e.prototype.moments=function(n){var t,r,u,f,l,d,p,v,_,x,g,b,C=this.data,S=this.size.y,M=this.size.x,w=[],m=[],O=Math.PI,T=O/4;if(n<=0)return m;for(l=0;l<n;l++)w[l]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(r=0;r<S;r++)for(f=r*r,t=0;t<M;t++)(u=C[r*M+t])>0&&(d=w[u-1],d.m00+=1,d.m01+=r,d.m10+=t,d.m11+=t*r,d.m02+=f,d.m20+=t*t);for(l=0;l<n;l++)d=w[l],isNaN(d.m00)||d.m00===0||(x=d.m10/d.m00,g=d.m01/d.m00,p=d.m11/d.m00-x*g,v=d.m02/d.m00-g*g,_=d.m20/d.m00-x*x,b=(v-_)/(2*p),b=.5*Math.atan(b)+(p>=0?T:-T)+O,d.theta=(180*b/O+90)%180-90,d.theta<0&&(d.theta+=180),d.rad=b>O?b-O:b,d.vec=o.clone([Math.cos(b),Math.sin(b)]),m.push(d));return m},e.prototype.show=function(n,t){var r,u,f,l,d,p,v;for(t||(t=1),r=n.getContext("2d"),n.width=this.size.x,n.height=this.size.y,u=r.getImageData(0,0,n.width,n.height),f=u.data,l=0,v=0;v<this.size.y;v++)for(p=0;p<this.size.x;p++)d=v*this.size.x+p,l=this.get(p,v)*t,f[4*d+0]=l,f[4*d+1]=l,f[4*d+2]=l,f[4*d+3]=255;r.putImageData(u,0,0)},e.prototype.overlay=function(n,t,r){(!t||t<0||t>360)&&(t=360);for(var u=[0,1,1],f=[0,0,0],l=[255,255,255],d=[0,0,0],p=[],v=n.getContext("2d"),_=v.getImageData(r.x,r.y,this.size.x,this.size.y),x=_.data,g=this.data.length;g--;)u[0]=this.data[g]*t,p=u[0]<=0?l:u[0]>=360?d:i.i(s.a)(u,f),x[4*g+0]=p[0],x[4*g+1]=p[1],x[4*g+2]=p[2],x[4*g+3]=255;v.putImageData(_,r.x,r.y)},y.a=e},function(h,y,i){function e(s,a,o){a=="__proto__"&&c?c(s,a,{configurable:!0,enumerable:!0,value:o,writable:!0}):s[a]=o}var c=i(37);h.exports=e},function(h,y,i){function e(a,o){var n=s(a,o);return c(n)?n:void 0}var c=i(97),s=i(120);h.exports=e},function(h,y,i){function e(a){if(typeof a=="string"||c(a))return a;var o=a+"";return o=="0"&&1/a==-s?"-0":o}var c=i(27),s=1/0;h.exports=e},function(h,y,i){function e(a){return a!=null&&s(a.length)&&!c(a)}var c=i(25),s=i(26);h.exports=e},function(h,y,i){function e(r){if(!s(r))return!1;var u=c(r);return u==o||u==n||u==a||u==t}var c=i(8),s=i(0),a="[object AsyncFunction]",o="[object Function]",n="[object GeneratorFunction]",t="[object Proxy]";h.exports=e},function(h,y){function i(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=e}var e=9007199254740991;h.exports=i},function(h,y,i){function e(o){return typeof o=="symbol"||s(o)&&c(o)==a}var c=i(8),s=i(6),a="[object Symbol]";h.exports=e},function(h,y,i){var e=i(100),c=i(116),s=c(function(a,o,n){e(a,o,n)});h.exports=s},function(h,y){h.exports=function(i){return i.webpackPolyfill||(i.deprecate=function(){},i.paths=[],i.children||(i.children=[]),Object.defineProperty(i,"loaded",{enumerable:!0,get:function(){return i.l}}),Object.defineProperty(i,"id",{enumerable:!0,get:function(){return i.i}}),i.webpackPolyfill=1),i}},function(h,y,i){var e={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(c,s){function a(d,p,v,_){var x,g,b;for(x=0;x<7;x++){if(g=d.cy+f[d.dir][0],b=d.cx+f[d.dir][1],t=g*l+b,r[t]===p&&(u[t]===0||u[t]===v))return u[t]=v,d.cy=g,d.cx=b,!0;u[t]===0&&(u[t]=_),d.dir=(d.dir+1)%8}return!1}function o(d,p,v){return{dir:v,x:d,y:p,next:null,prev:null}}function n(d,p,v,_,x){var g,b,C,S=null,M={cx:p,cy:d,dir:0};if(a(M,_,v,x)){S=o(p,d,M.dir),g=S,C=M.dir,b=o(M.cx,M.cy,0),b.prev=g,g.next=b,b.next=null,g=b;do M.dir=(M.dir+6)%8,a(M,_,v,x),C!==M.dir?(g.dir=M.dir,b=o(M.cx,M.cy,0),b.prev=g,g.next=b,b.next=null,g=b):(g.dir=C,g.x=M.cx,g.y=M.cy),C=M.dir;while(M.cx!==p||M.cy!==d);S.prev=g.prev,g.prev.next=S}return S}var t,r=c.data,u=s.data,f=this.searchDirections,l=c.size.x;return{trace:function(d,p,v,_){return a(d,p,v,_)},contourTracing:function(d,p,v,_,x){return n(d,p,v,_,x)}}}};y.a=e},function(h,y,i){function e(){c.a.call(this)}var c=i(1),s=i(3),a={ALPHABETH_STRING:{value:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,46,32,42,36,47,43,37]},CHARACTER_ENCODINGS:{value:[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]},ASTERISK:{value:148},FORMAT:{value:"code_39",writeable:!1}};e.prototype=Object.create(c.a.prototype,a),e.prototype.constructor=e,e.prototype._decode=function(){var o,n,t,r,u=this,f=[0,0,0,0,0,0,0,0,0],l=[],d=u._findStart();if(!d)return null;r=u._nextSet(u._row,d.end);do{if(f=u._toCounters(r,f),(t=u._toPattern(f))<0||(o=u._patternToChar(t))<0)return null;l.push(o),n=r,r+=s.a.sum(f),r=u._nextSet(u._row,r)}while(o!=="*");return l.pop(),l.length&&u._verifyTrailingWhitespace(n,r,f)?{code:l.join(""),start:d.start,end:r,startInfo:d,decodedCodes:l}:null},e.prototype._verifyTrailingWhitespace=function(o,n,t){var r=s.a.sum(t);return 3*(n-o-r)>=r},e.prototype._patternToChar=function(o){var n,t=this;for(n=0;n<t.CHARACTER_ENCODINGS.length;n++)if(t.CHARACTER_ENCODINGS[n]===o)return String.fromCharCode(t.ALPHABET[n]);return-1},e.prototype._findNextWidth=function(o,n){var t,r=Number.MAX_VALUE;for(t=0;t<o.length;t++)o[t]<r&&o[t]>n&&(r=o[t]);return r},e.prototype._toPattern=function(o){for(var n,t,r=o.length,u=0,f=r,l=0,d=this;f>3;){for(u=d._findNextWidth(o,u),f=0,n=0,t=0;t<r;t++)o[t]>u&&(n|=1<<r-1-t,f++,l+=o[t]);if(f===3){for(t=0;t<r&&f>0;t++)if(o[t]>u&&(f--,2*o[t]>=l))return-1;return n}}return-1},e.prototype._findStart=function(){var o,n,t,r=this,u=r._nextSet(r._row),f=u,l=[0,0,0,0,0,0,0,0,0],d=0,p=!1;for(o=u;o<r._row.length;o++)if(r._row[o]^p)l[d]++;else{if(d===l.length-1){if(r._toPattern(l)===r.ASTERISK&&(t=Math.floor(Math.max(0,f-(o-f)/4)),r._matchRange(t,f,0)))return{start:f,end:o};for(f+=l[0]+l[1],n=0;n<7;n++)l[n]=l[n+2];l[7]=0,l[8]=0,d--}else d++;l[d]=1,p=!p}return null},y.a=e},function(h,y){function i(e,c){return e[0]*c[0]+e[1]*c[1]}h.exports=i},function(h,y,i){var e=i(22),c=i(5),s=e(c,"Map");h.exports=s},function(h,y,i){function e(t){var r=-1,u=t==null?0:t.length;for(this.clear();++r<u;){var f=t[r];this.set(f[0],f[1])}}var c=i(138),s=i(139),a=i(140),o=i(141),n=i(142);e.prototype.clear=c,e.prototype.delete=s,e.prototype.get=a,e.prototype.has=o,e.prototype.set=n,h.exports=e},function(h,y,i){function e(a,o,n){(n===void 0||s(a[o],n))&&(n!==void 0||o in a)||c(a,o,n)}var c=i(21),s=i(17);h.exports=e},function(h,y,i){function e(n,t,r){var u=n[t];o.call(n,t)&&s(u,r)&&(r!==void 0||t in n)||c(n,t,r)}var c=i(21),s=i(17),a=Object.prototype,o=a.hasOwnProperty;h.exports=e},function(h,y,i){var e=i(22),c=function(){try{var s=e(Object,"defineProperty");return s({},"",{}),s}catch{}}();h.exports=c},function(h,y,i){(function(e){var c=typeof e=="object"&&e&&e.Object===Object&&e;h.exports=c}).call(y,i(47))},function(h,y,i){var e=i(147),c=e(Object.getPrototypeOf,Object);h.exports=c},function(h,y){function i(c){var s=c&&c.constructor;return c===(typeof s=="function"&&s.prototype||e)}var e=Object.prototype;h.exports=i},function(h,y,i){function e(a,o,n){return o=s(o===void 0?a.length-1:o,0),function(){for(var t=arguments,r=-1,u=s(t.length-o,0),f=Array(u);++r<u;)f[r]=t[o+r];r=-1;for(var l=Array(o+1);++r<o;)l[r]=t[r];return l[o]=n(f),c(a,this,l)}}var c=i(87),s=Math.max;h.exports=e},function(h,y,i){var e=i(106),c=i(148),s=c(e);h.exports=s},function(h,y){function i(e){return e}h.exports=i},function(h,y,i){(function(e){var c=i(5),s=i(163),a=typeof y=="object"&&y&&!y.nodeType&&y,o=a&&typeof e=="object"&&e&&!e.nodeType&&e,n=o&&o.exports===a,t=n?c.Buffer:void 0,r=t?t.isBuffer:void 0,u=r||s;e.exports=u}).call(y,i(29)(h))},function(h,y,i){var e=i(98),c=i(109),s=i(145),a=s&&s.isTypedArray,o=a?c(a):e;h.exports=o},function(h,y,i){function e(o){return a(o)?c(o,!0):s(o)}var c=i(88),s=i(99),a=i(24);h.exports=e},function(h,y){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(i=window)}h.exports=i},function(h,y,i){function e(E){t(E),D=P.a.create(Z.decoder,A)}function c(E){var B;if(Z.inputStream.type==="VideoStream")B=document.createElement("video"),m=$.a.createVideoStream(B);else if(Z.inputStream.type==="ImageStream")m=$.a.createImageStream();else if(Z.inputStream.type==="LiveStream"){var G=s();G&&((B=G.querySelector("video"))||(B=document.createElement("video"),G.appendChild(B))),m=$.a.createLiveStream(B),I.a.request(B,Z.inputStream.constraints).then(function(){m.trigger("canrecord")}).catch(function(H){return E(H)})}m.setAttribute("preload","auto"),m.setInputStream(Z.inputStream),m.addEventListener("canrecord",a.bind(void 0,E))}function s(){var E=Z.inputStream.target;if(E&&E.nodeName&&E.nodeType===1)return E;var B=typeof E=="string"?E:"#interactive.viewport";return document.querySelector(B)}function a(E){Q.a.checkImageConstraints(m,Z.locator),n(),O=ee.a.create(m,Y.dom.image),w(Z.numOfWorkers,function(){Z.numOfWorkers===0&&e(),o(E)})}function o(E){m.play(),E()}function n(){if(typeof document<"u"){var E=s();if(Y.dom.image=document.querySelector("canvas.imgBuffer"),Y.dom.image||(Y.dom.image=document.createElement("canvas"),Y.dom.image.className="imgBuffer",E&&Z.inputStream.type==="ImageStream"&&E.appendChild(Y.dom.image)),Y.ctx.image=Y.dom.image.getContext("2d"),Y.dom.image.width=m.getCanvasSize().x,Y.dom.image.height=m.getCanvasSize().y,Y.dom.overlay=document.querySelector("canvas.drawingBuffer"),!Y.dom.overlay){Y.dom.overlay=document.createElement("canvas"),Y.dom.overlay.className="drawingBuffer",E&&E.appendChild(Y.dom.overlay);var B=document.createElement("br");B.setAttribute("clear","all"),E&&E.appendChild(B)}Y.ctx.overlay=Y.dom.overlay.getContext("2d"),Y.dom.overlay.width=m.getCanvasSize().x,Y.dom.overlay.height=m.getCanvasSize().y}}function t(E){A=E||new oe.a({x:m.getWidth(),y:m.getHeight()}),R=[re.clone([0,0]),re.clone([0,A.size.y]),re.clone([A.size.x,A.size.y]),re.clone([A.size.x,0])],Q.a.init(A,Z.locator)}function r(){return Z.locate?Q.a.locate():[[re.clone(R[0]),re.clone(R[1]),re.clone(R[2]),re.clone(R[3])]]}function u(E){function B(de){for(var be=de.length;be--;)de[be][0]+=te,de[be][1]+=ve}function G(de){de[0].x+=te,de[0].y+=ve,de[1].x+=te,de[1].y+=ve}var H,se=m.getTopRight(),te=se.x,ve=se.y;if(te!==0||ve!==0){if(E.barcodes)for(H=0;H<E.barcodes.length;H++)u(E.barcodes[H]);if(E.line&&E.line.length===2&&G(E.line),E.box&&B(E.box),E.boxes&&E.boxes.length>0)for(H=0;H<E.boxes.length;H++)B(E.boxes[H])}}function f(E,B){B&&j&&(E.barcodes?E.barcodes.filter(function(G){return G.codeResult}).forEach(function(G){return f(G,B)}):E.codeResult&&j.addResult(B,m.getCanvasSize(),E.codeResult))}function l(E){return E&&(E.barcodes?E.barcodes.some(function(B){return B.codeResult}):E.codeResult)}function d(E,B){var G=E;E&&ce&&(u(E),f(E,B),G=E.barcodes||E),U.a.publish("processed",G),l(E)&&U.a.publish("detected",G)}function p(){var E,B;B=r(),B?(E=D.decodeFromBoundingBoxes(B),E=E||{},E.boxes=B,d(E,A.data)):d()}function v(){var E;if(ce){if(ne.length>0){if(!(E=ne.filter(function(B){return!B.busy})[0]))return;O.attachData(E.imageData)}else O.attachData(A.data);O.grab()&&(E?(E.busy=!0,E.worker.postMessage({cmd:"process",imageData:E.imageData},[E.imageData.buffer])):p())}else p()}function _(){var E=null,B=1e3/(Z.frequency||60);T=!1,function G(H){E=E||H,T||(H>=E&&(E+=B,v()),window.requestAnimFrame(G))}(performance.now())}function x(){ce&&Z.inputStream.type==="LiveStream"?_():v()}function g(E){var B,G={worker:void 0,imageData:new Uint8Array(m.getWidth()*m.getHeight()),busy:!0};B=S(),G.worker=new Worker(B),G.worker.onmessage=function(H){if(H.data.event==="initialized")return URL.revokeObjectURL(B),G.busy=!1,G.imageData=new Uint8Array(H.data.imageData),E(G);H.data.event==="processed"?(G.imageData=new Uint8Array(H.data.imageData),G.busy=!1,d(H.data.result,G.imageData)):H.data.event},G.worker.postMessage({cmd:"init",size:{x:m.getWidth(),y:m.getHeight()},imageData:G.imageData,config:b(Z)},[G.imageData.buffer])}function b(E){return K({},E,{inputStream:K({},E.inputStream,{target:null})})}function C(E){function B(te){self.postMessage({event:"processed",imageData:se.data,result:te},[se.data.buffer])}function G(){self.postMessage({event:"initialized",imageData:se.data},[se.data.buffer])}if(E){var H=E().default;if(!H)return void self.postMessage({event:"error",message:"Quagga could not be created"})}var se;self.onmessage=function(te){if(te.data.cmd==="init"){var ve=te.data.config;ve.numOfWorkers=0,se=new H.ImageWrapper({x:te.data.size.x,y:te.data.size.y},new Uint8Array(te.data.imageData)),H.init(ve,G,se),H.onProcessed(B)}else te.data.cmd==="process"?(se.data=new Uint8Array(te.data.imageData),H.start()):te.data.cmd==="setReaders"&&H.setReaders(te.data.readers)}}function S(){var E,B;return le!==void 0&&(B=le),E=new Blob(["("+C.toString()+")("+B+");"],{type:"text/javascript"}),window.URL.createObjectURL(E)}function M(E){D?D.setReaders(E):ce&&ne.length>0&&ne.forEach(function(B){B.worker.postMessage({cmd:"setReaders",readers:E})})}function w(E,B){var G=E-ne.length;if(G===0)return B&&B();if(G<0)return ne.slice(G).forEach(function(te){te.worker.terminate()}),ne=ne.slice(0,G),B&&B();for(var H=function(te){ne.push(te),ne.length>=E&&B&&B()},se=0;se<G;se++)g(H)}Object.defineProperty(y,"__esModule",{value:!0});var m,O,T,A,R,D,j,N=i(28),z=i.n(N),F=i(54),oe=(i.n(F),i(20)),Q=i(64),P=i(57),U=i(51),I=i(59),L=i(9),W=i(49),V=i(55),$=i(63),ee=i(61),K=Object.assign||function(E){for(var B=1;B<arguments.length;B++){var G=arguments[B];for(var H in G)Object.prototype.hasOwnProperty.call(G,H)&&(E[H]=G[H])}return E},re={clone:i(7)},Y={ctx:{image:null,overlay:null},dom:{image:null,overlay:null}},ne=[],ce=!0,Z={};y.default={init:function(E,B,G){if(Z=z()({},V.a,E),G)return ce=!1,e(G),B();c(B)},start:function(){x()},stop:function(){T=!0,w(0),Z.inputStream.type==="LiveStream"&&(I.a.release(),m.clearEventHandlers())},pause:function(){T=!0},onDetected:function(E){U.a.subscribe("detected",E)},offDetected:function(E){U.a.unsubscribe("detected",E)},onProcessed:function(E){U.a.subscribe("processed",E)},offProcessed:function(E){U.a.unsubscribe("processed",E)},setReaders:function(E){M(E)},registerResultCollector:function(E){E&&typeof E.addResult=="function"&&(j=E)},canvas:Y,decodeSingle:function(E,B){var G=this;E=z()({inputStream:{type:"ImageStream",sequence:!1,size:800,src:E.src},numOfWorkers:1,locator:{halfSample:!1}},E),this.init(E,function(){U.a.once("processed",function(H){G.stop(),B.call(null,H)},!0),x()})},ImageWrapper:oe.a,ImageDebug:L.a,ResultCollector:W.a,CameraAccess:I.a}},function(h,y,i){function e(a,o){return!!o&&o.some(function(n){return Object.keys(n).every(function(t){return n[t]===a[t]})})}function c(a,o){return typeof o!="function"||o(a)}var s=i(9);y.a={create:function(a){function o(l){return u&&l&&!e(l,a.blacklist)&&c(l,a.filter)}var n=document.createElement("canvas"),t=n.getContext("2d"),r=[],u=a.capacity||20,f=a.capture===!0;return{addResult:function(l,d,p){var v={};o(p)&&(u--,v.codeResult=p,f&&(n.width=d.x,n.height=d.y,s.a.drawImage(l,d,t),v.frame=n.toDataURL()),r.push(v))},getResults:function(){return r}}}}},function(h,y,i){var e={clone:i(7),dot:i(32)};y.a={create:function(c,s){function a(){o(c),n()}function o(f){u[f.id]=f,t.push(f)}function n(){var f,l=0;for(f=0;f<t.length;f++)l+=t[f].rad;r.rad=l/t.length,r.vec=e.clone([Math.cos(r.rad),Math.sin(r.rad)])}var t=[],r={rad:0,vec:e.clone([0,0])},u={};return a(),{add:function(f){u[f.id]||(o(f),n())},fits:function(f){return Math.abs(e.dot(f.point.vec,r.vec))>s},getPoints:function(){return t},getCenter:function(){return r}}},createPoint:function(c,s,a){return{rad:c[a],point:c,id:s}}}},function(h,y,i){y.a=function(){function e(n){return o[n]||(o[n]={subscribers:[]}),o[n]}function c(){o={}}function s(n,t){n.async?setTimeout(function(){n.callback(t)},4):n.callback(t)}function a(n,t,r){var u;if(typeof t=="function")u={callback:t,async:r};else if(u=t,!u.callback)throw"Callback was not specified on options";e(n).subscribers.push(u)}var o={};return{subscribe:function(n,t,r){return a(n,t,r)},publish:function(n,t){var r=e(n),u=r.subscribers;u.filter(function(f){return!!f.once}).forEach(function(f){s(f,t)}),r.subscribers=u.filter(function(f){return!f.once}),r.subscribers.forEach(function(f){s(f,t)})},once:function(n,t,r){a(n,{callback:t,async:r,once:!0})},unsubscribe:function(n,t){var r;n?(r=e(n),r.subscribers=r&&t?r.subscribers.filter(function(u){return u.callback!==t}):[]):c()}}}()},function(h,y,i){function e(){return navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices=="function"?navigator.mediaDevices.enumerateDevices():Promise.reject(new Error("enumerateDevices is not defined"))}function c(s){return navigator.mediaDevices&&typeof navigator.mediaDevices.getUserMedia=="function"?navigator.mediaDevices.getUserMedia(s):Promise.reject(new Error("getUserMedia is not defined"))}y.b=e,y.a=c},function(h,y,i){function e(c,s,a){a||(a={data:null,size:s}),this.data=a.data,this.originalSize=a.size,this.I=a,this.from=c,this.size=s}e.prototype.show=function(c,s){var a,o,n,t,r,u,f;for(s||(s=1),a=c.getContext("2d"),c.width=this.size.x,c.height=this.size.y,o=a.getImageData(0,0,c.width,c.height),n=o.data,t=0,r=0;r<this.size.y;r++)for(u=0;u<this.size.x;u++)f=r*this.size.x+u,t=this.get(u,r)*s,n[4*f+0]=t,n[4*f+1]=t,n[4*f+2]=t,n[4*f+3]=255;o.data=n,a.putImageData(o,0,0)},e.prototype.get=function(c,s){return this.data[(this.from.y+s)*this.originalSize.x+this.from.x+c]},e.prototype.updateData=function(c){this.originalSize=c.size,this.data=c.data},e.prototype.updateFrom=function(c){return this.from=c,this},y.a=e},function(h,y){typeof window<"u"&&(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(i){window.setTimeout(i,1e3/60)}}()),Math.imul=Math.imul||function(i,e){var c=i>>>16&65535,s=65535&i,a=e>>>16&65535,o=65535&e;return s*o+(c*o+s*a<<16>>>0)|0},typeof Object.assign!="function"&&(Object.assign=function(i){if(i===null)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(i),c=1;c<arguments.length;c++){var s=arguments[c];if(s!==null)for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e})},function(h,y,i){var e=void 0;e=i(56),y.a=e},function(h,y){h.exports={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:4,decoder:{readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium"}}},function(h,y,i){var e=i(58),c=(i(9),i(69)),s=i(4),a=i(31),o=i(70),n=i(68),t=i(77),r=i(74),u=i(72),f=i(73),l=i(76),d=i(75),p=i(67),v=i(71),_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},x={code_128_reader:c.a,ean_reader:s.a,ean_5_reader:f.a,ean_2_reader:u.a,ean_8_reader:r.a,code_39_reader:a.a,code_39_vin_reader:o.a,codabar_reader:n.a,upc_reader:t.a,upc_e_reader:l.a,i2of5_reader:d.a,"2of5_reader":p.a,code_93_reader:v.a};y.a={create:function(g,b){function C(){g.readers.forEach(function(R){var D,j={},N=[];(R===void 0?"undefined":_(R))==="object"?(D=R.format,j=R.config):typeof R=="string"&&(D=R),j.supplements&&(N=j.supplements.map(function(z){return new x[z]})),A.push(new x[D](j,N))})}function S(R,D,j){function N(z){var F={y:z*Math.sin(D),x:z*Math.cos(D)};R[0].y-=F.y,R[0].x-=F.x,R[1].y+=F.y,R[1].x+=F.x}for(N(j);j>1&&(!b.inImageWithBorder(R[0],0)||!b.inImageWithBorder(R[1],0));)j-=Math.ceil(j/2),N(-j);return R}function M(R){return[{x:(R[1][0]-R[0][0])/2+R[0][0],y:(R[1][1]-R[0][1])/2+R[0][1]},{x:(R[3][0]-R[2][0])/2+R[2][0],y:(R[3][1]-R[2][1])/2+R[2][1]}]}function w(R){var D,j=null,N=e.a.getBarcodeLine(b,R[0],R[1]);for(e.a.toBinaryLine(N),D=0;D<A.length&&j===null;D++)j=A[D].decodePattern(N.line);return j===null?null:{codeResult:j,barcodeLine:N}}function m(R,D,j){var N,z,F,oe=Math.sqrt(Math.pow(R[1][0]-R[0][0],2)+Math.pow(R[1][1]-R[0][1],2)),Q=16,P=null,U=Math.sin(j),I=Math.cos(j);for(N=1;N<Q&&P===null;N++)z=oe/Q*N*(N%2==0?-1:1),F={y:z*U,x:z*I},D[0].y+=F.x,D[0].x-=F.y,D[1].y+=F.x,D[1].x-=F.y,P=w(D);return P}function O(R){return Math.sqrt(Math.pow(Math.abs(R[1].y-R[0].y),2)+Math.pow(Math.abs(R[1].x-R[0].x),2))}function T(R){var D,j,N,z;return D=M(R),z=O(D),j=Math.atan2(D[1].y-D[0].y,D[1].x-D[0].x),(D=S(D,j,Math.floor(.1*z)))===null?null:(N=w(D),N===null&&(N=m(R,D,j)),N===null?null:{codeResult:N.codeResult,line:D,angle:j,pattern:N.barcodeLine.line,threshold:N.barcodeLine.threshold})}var A=[];return C(),{decodeFromBoundingBox:function(R){return T(R)},decodeFromBoundingBoxes:function(R){var D,j,N=[],z=g.multiple;for(D=0;D<R.length;D++){var F=R[D];if(j=T(F)||{},j.box=F,z)N.push(j);else if(j.codeResult)return j}if(z)return{barcodes:N}},setReaders:function(R){g.readers=R,A.length=0,C()}}}}},function(h,y,i){var e=(i(20),{}),c={DIR:{UP:1,DOWN:-1}};e.getBarcodeLine=function(s,a,o){function n(T,A){v=M[A*w+T],m=v<m?v:m,O=v>O?v:O,S.push(v)}var t,r,u,f,l,d,p,v,_=0|a.x,x=0|a.y,g=0|o.x,b=0|o.y,C=Math.abs(b-x)>Math.abs(g-_),S=[],M=s.data,w=s.size.x,m=255,O=0;for(C&&(d=_,_=x,x=d,d=g,g=b,b=d),_>g&&(d=_,_=g,g=d,d=x,x=b,b=d),t=g-_,r=Math.abs(b-x),u=t/2|0,l=x,f=x<b?1:-1,p=_;p<g;p++)C?n(l,p):n(p,l),(u-=r)<0&&(l+=f,u+=t);return{line:S,min:m,max:O}},e.toBinaryLine=function(s){var a,o,n,t,r,u,f=s.min,l=s.max,d=s.line,p=f+(l-f)/2,v=[],_=(l-f)/12,x=-_;for(n=d[0]>p?c.DIR.UP:c.DIR.DOWN,v.push({pos:0,val:d[0]}),r=0;r<d.length-2;r++)a=d[r+1]-d[r],o=d[r+2]-d[r+1],t=a+o<x&&d[r+1]<1.5*p?c.DIR.DOWN:a+o>_&&d[r+1]>.5*p?c.DIR.UP:n,n!==t&&(v.push({pos:r,val:d[r]}),n=t);for(v.push({pos:d.length,val:d[d.length-1]}),u=v[0].pos;u<v[1].pos;u++)d[u]=d[u]>p?0:1;for(r=1;r<v.length-1;r++)for(_=v[r+1].val>v[r].val?v[r].val+(v[r+1].val-v[r].val)/3*2|0:v[r+1].val+(v[r].val-v[r+1].val)/3|0,u=v[r].pos;u<v[r+1].pos;u++)d[u]=d[u]>_?0:1;return{line:d,threshold:_}},e.debug={printFrequency:function(s,a){var o,n=a.getContext("2d");for(a.width=s.length,a.height=256,n.beginPath(),n.strokeStyle="blue",o=0;o<s.length;o++)n.moveTo(o,255),n.lineTo(o,255-s[o]);n.stroke(),n.closePath()},printPattern:function(s,a){var o,n=a.getContext("2d");for(a.width=s.length,n.fillColor="black",o=0;o<s.length;o++)s[o]===1&&n.fillRect(o,0,1,100)}},y.a=e},function(h,y,i){function e(l){return new Promise(function(d,p){function v(){_>0?l.videoWidth>10&&l.videoHeight>10?d():window.setTimeout(v,500):p("Unable to play video stream. Is webcam working?"),_--}var _=10;v()})}function c(l,d){return i.i(f.a)(d).then(function(p){return new Promise(function(v){t=p,l.setAttribute("autoplay",!0),l.setAttribute("muted",!0),l.setAttribute("playsinline",!0),l.srcObject=p,l.addEventListener("loadedmetadata",function(){l.play(),v()})})}).then(e.bind(null,l))}function s(l){var d=u()(l,["width","height","facingMode","aspectRatio","deviceId"]);return l.minAspectRatio!==void 0&&l.minAspectRatio>0&&(d.aspectRatio=l.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead")),l.facing!==void 0&&(d.facingMode=l.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'")),d}function a(l){var d={audio:!1,video:s(l)};return d.video.deviceId&&d.video.facingMode&&delete d.video.facingMode,Promise.resolve(d)}function o(){return i.i(f.b)().then(function(l){return l.filter(function(d){return d.kind==="videoinput"})})}function n(){if(t){var l=t.getVideoTracks();if(l&&l.length)return l[0]}}var t,r=i(162),u=i.n(r),f=i(52);y.a={request:function(l,d){return a(d).then(c.bind(null,l))},release:function(){var l=t&&t.getVideoTracks();l&&l.length&&l[0].stop(),t=null},enumerateVideoDevices:o,getActiveStreamLabel:function(){var l=n();return l?l.label:""},getActiveTrack:n}},function(h,y,i){function e(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f;return/^blob\:/i.test(l)?s(l).then(c).then(function(p){return a(p,d)}):Promise.resolve(null)}function c(l){return new Promise(function(d){var p=new FileReader;p.onload=function(v){return d(v.target.result)},p.readAsArrayBuffer(l)})}function s(l){return new Promise(function(d,p){var v=new XMLHttpRequest;v.open("GET",l,!0),v.responseType="blob",v.onreadystatechange=function(){v.readyState!==XMLHttpRequest.DONE||v.status!==200&&v.status!==0||d(this.response)},v.onerror=p,v.send()})}function a(l){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f,p=new DataView(l),v=l.byteLength,_=d.reduce(function(g,b){var C=Object.keys(u).filter(function(S){return u[S]===b})[0];return C&&(g[C]=b),g},{}),x=2;if(p.getUint8(0)!==255||p.getUint8(1)!==216)return!1;for(;x<v;){if(p.getUint8(x)!==255)return!1;if(p.getUint8(x+1)===225)return o(p,x+4,_);x+=2+p.getUint16(x+2)}}function o(l,d,p){if(r(l,d,4)!=="Exif")return!1;var v=d+6,_=void 0;if(l.getUint16(v)===18761)_=!1;else{if(l.getUint16(v)!==19789)return!1;_=!0}if(l.getUint16(v+2,!_)!==42)return!1;var x=l.getUint32(v+4,!_);return!(x<8)&&n(l,v,v+x,p,_)}function n(l,d,p,v,_){for(var x=l.getUint16(p,!_),g={},b=0;b<x;b++){var C=p+12*b+2,S=v[l.getUint16(C,!_)];S&&(g[S]=t(l,C,d,p,_))}return g}function t(l,d,p,v,_){var x=l.getUint16(d+2,!_),g=l.getUint32(d+4,!_);switch(x){case 3:if(g===1)return l.getUint16(d+8,!_)}}function r(l,d,p){for(var v="",_=d;_<d+p;_++)v+=String.fromCharCode(l.getUint8(_));return v}y.a=e;var u={274:"orientation"},f=Object.keys(u).map(function(l){return u[l]})},function(h,y,i){function e(o,n){o.width!==n.x&&(o.width=n.x),o.height!==n.y&&(o.height=n.y)}var c=i(19),s=Math.PI/180,a={};a.create=function(o,n){var t,r={},u=o.getConfig(),f=(i.i(c.b)(o.getRealWidth(),o.getRealHeight()),o.getCanvasSize()),l=i.i(c.b)(o.getWidth(),o.getHeight()),d=o.getTopRight(),p=d.x,v=d.y,_=null,x=null;return t=n||document.createElement("canvas"),t.width=f.x,t.height=f.y,_=t.getContext("2d"),x=new Uint8Array(l.x*l.y),r.attachData=function(g){x=g},r.getData=function(){return x},r.grab=function(){var g,b=u.halfSample,C=o.getFrame(),S=C,M=0;if(S){if(e(t,f),u.type==="ImageStream"&&(S=C.img,C.tags&&C.tags.orientation))switch(C.tags.orientation){case 6:M=90*s;break;case 8:M=-90*s}return M!==0?(_.translate(f.x/2,f.y/2),_.rotate(M),_.drawImage(S,-f.y/2,-f.x/2,f.y,f.x),_.rotate(-M),_.translate(-f.x/2,-f.y/2)):_.drawImage(S,0,0,f.x,f.y),g=_.getImageData(p,v,l.x,l.y).data,b?i.i(c.c)(g,l,x):i.i(c.d)(g,x,u),!0}return!1},r.getSize=function(){return l},r},y.a=a},function(h,y,i){function e(a,o){a.onload=function(){o.loaded(this)}}var c=i(60),s={};s.load=function(a,o,n,t,r){var u,f,l,d=new Array(t),p=new Array(d.length);if(r===!1)d[0]=a;else for(u=0;u<d.length;u++)l=n+u,d[u]=a+"image-"+("00"+l).slice(-3)+".jpg";for(p.notLoaded=[],p.addImage=function(v){p.notLoaded.push(v)},p.loaded=function(v){for(var _=p.notLoaded,x=0;x<_.length;x++)if(_[x]===v){_.splice(x,1);for(var g=0;g<d.length;g++){var b=d[g].substr(d[g].lastIndexOf("/"));if(v.src.lastIndexOf(b)!==-1){p[g]={img:v};break}}break}_.length===0&&(r===!1?i.i(c.a)(a,["orientation"]).then(function(C){p[0].tags=C,o(p)}).catch(function(C){console.log(C),o(p)}):o(p))},u=0;u<d.length;u++)f=new Image,p.addImage(f),e(f,p),f.src=d[u]},y.a=s},function(h,y,i){var e=i(62),c={};c.createVideoStream=function(s){function a(){var p=s.videoWidth,v=s.videoHeight;o=r.size?p/v>1?r.size:Math.floor(p/v*r.size):p,n=r.size?p/v>1?Math.floor(v/p*r.size):r.size:v,d.x=o,d.y=n}var o,n,t={},r=null,u=["canrecord","ended"],f={},l={x:0,y:0},d={x:0,y:0};return t.getRealWidth=function(){return s.videoWidth},t.getRealHeight=function(){return s.videoHeight},t.getWidth=function(){return o},t.getHeight=function(){return n},t.setWidth=function(p){o=p},t.setHeight=function(p){n=p},t.setInputStream=function(p){r=p,s.src=p.src!==void 0?p.src:""},t.ended=function(){return s.ended},t.getConfig=function(){return r},t.setAttribute=function(p,v){s.setAttribute(p,v)},t.pause=function(){s.pause()},t.play=function(){s.play()},t.setCurrentTime=function(p){r.type!=="LiveStream"&&(s.currentTime=p)},t.addEventListener=function(p,v,_){u.indexOf(p)!==-1?(f[p]||(f[p]=[]),f[p].push(v)):s.addEventListener(p,v,_)},t.clearEventHandlers=function(){u.forEach(function(p){var v=f[p];v&&v.length>0&&v.forEach(function(_){s.removeEventListener(p,_)})})},t.trigger=function(p,v){var _,x=f[p];if(p==="canrecord"&&a(),x&&x.length>0)for(_=0;_<x.length;_++)x[_].apply(t,v)},t.setTopRight=function(p){l.x=p.x,l.y=p.y},t.getTopRight=function(){return l},t.setCanvasSize=function(p){d.x=p.x,d.y=p.y},t.getCanvasSize=function(){return d},t.getFrame=function(){return s},t},c.createLiveStream=function(s){s.setAttribute("autoplay",!0);var a=c.createVideoStream(s);return a.ended=function(){return!1},a},c.createImageStream=function(){function s(){p=!1,e.a.load(g,function(m){if(v=m,m[0].tags&&m[0].tags.orientation)switch(m[0].tags.orientation){case 6:case 8:u=m[0].img.height,f=m[0].img.width;break;default:u=m[0].img.width,f=m[0].img.height}else u=m[0].img.width,f=m[0].img.height;o=r.size?u/f>1?r.size:Math.floor(u/f*r.size):u,n=r.size?u/f>1?Math.floor(f/u*r.size):r.size:f,w.x=o,w.y=n,p=!0,l=0,setTimeout(function(){a("canrecord",[])},0)},x,_,r.sequence)}function a(m,O){var T,A=S[m];if(A&&A.length>0)for(T=0;T<A.length;T++)A[T].apply(t,O)}var o,n,t={},r=null,u=0,f=0,l=0,d=!0,p=!1,v=null,_=0,x=1,g=null,b=!1,C=["canrecord","ended"],S={},M={x:0,y:0},w={x:0,y:0};return t.trigger=a,t.getWidth=function(){return o},t.getHeight=function(){return n},t.setWidth=function(m){o=m},t.setHeight=function(m){n=m},t.getRealWidth=function(){return u},t.getRealHeight=function(){return f},t.setInputStream=function(m){r=m,m.sequence===!1?(g=m.src,_=1):(g=m.src,_=m.length),s()},t.ended=function(){return b},t.setAttribute=function(){},t.getConfig=function(){return r},t.pause=function(){d=!0},t.play=function(){d=!1},t.setCurrentTime=function(m){l=m},t.addEventListener=function(m,O){C.indexOf(m)!==-1&&(S[m]||(S[m]=[]),S[m].push(O))},t.setTopRight=function(m){M.x=m.x,M.y=m.y},t.getTopRight=function(){return M},t.setCanvasSize=function(m){w.x=m.x,w.y=m.y},t.getCanvasSize=function(){return w},t.getFrame=function(){var m;return p?(d||(m=v[l],l<_-1?l++:setTimeout(function(){b=!0,a("ended",[])},0)),m):null},t},y.a=c},function(h,y,i){(function(e){function c(){var P;v=p.halfSample?new T.a({x:m.size.x/2|0,y:m.size.y/2|0}):m,w=i.i(A.e)(p.patchSize,v.size),Q.x=v.size.x/w.x|0,Q.y=v.size.y/w.y|0,M=new T.a(v.size,void 0,Uint8Array,!1),g=new T.a(w,void 0,Array,!0),P=new ArrayBuffer(65536),x=new T.a(w,new Uint8Array(P,0,w.x*w.y)),_=new T.a(w,new Uint8Array(P,w.x*w.y*3,w.x*w.y),void 0,!0),O=i.i(N.a)(typeof window<"u"?window:typeof self<"u"?self:e,{size:w.x},P),S=new T.a({x:v.size.x/x.size.x|0,y:v.size.y/x.size.y|0},void 0,Array,!0),b=new T.a(S.size,void 0,void 0,!0),C=new T.a(S.size,void 0,Int32Array,!0)}function s(){p.useWorker||typeof document>"u"||(oe.dom.binary=document.createElement("canvas"),oe.dom.binary.className="binaryBuffer",oe.ctx.binary=oe.dom.binary.getContext("2d"),oe.dom.binary.width=M.size.x,oe.dom.binary.height=M.size.y)}function a(P){var U,I,L,W,V,$,ee,K=M.size.x,re=M.size.y,Y=-M.size.x,ne=-M.size.y;for(U=0,I=0;I<P.length;I++)W=P[I],U+=W.rad;for(U/=P.length,U=(180*U/Math.PI+90)%180-90,U<0&&(U+=180),U=(180-U)*Math.PI/180,V=F.copy(F.create(),[Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U)]),I=0;I<P.length;I++)for(W=P[I],L=0;L<4;L++)z.transformMat2(W.box[L],W.box[L],V);for(I=0;I<P.length;I++)for(W=P[I],L=0;L<4;L++)W.box[L][0]<K&&(K=W.box[L][0]),W.box[L][0]>Y&&(Y=W.box[L][0]),W.box[L][1]<re&&(re=W.box[L][1]),W.box[L][1]>ne&&(ne=W.box[L][1]);for($=[[K,re],[Y,re],[Y,ne],[K,ne]],ee=p.halfSample?2:1,V=F.invert(V,V),L=0;L<4;L++)z.transformMat2($[L],$[L],V);for(L=0;L<4;L++)z.scale($[L],$[L],ee);return $}function o(){i.i(A.f)(v,M),M.zeroBorder()}function n(){var P,U,I,L,W,V,$,ee=[];for(P=0;P<Q.x;P++)for(U=0;U<Q.y;U++)I=x.size.x*P,L=x.size.y*U,f(I,L),_.zeroBorder(),R.a.init(g.data,0),V=D.a.create(_,g),$=V.rasterize(0),W=g.moments($.count),ee=ee.concat(l(W,[P,U],I,L));return ee}function t(P){var U,I,L=[];for(U=0;U<P;U++)L.push(0);for(I=C.data.length;I--;)C.data[I]>0&&L[C.data[I]-1]++;return L=L.map(function(W,V){return{val:W,label:V+1}}),L.sort(function(W,V){return V.val-W.val}),L.filter(function(W){return W.val>=5})}function r(P,U){var I,L,W,V,$=[],ee=[];for(I=0;I<P.length;I++){for(L=C.data.length,$.length=0;L--;)C.data[L]===P[I].label&&(W=S.data[L],$.push(W));V=a($),V&&ee.push(V)}return ee}function u(P){var U=i.i(A.g)(P,.9),I=i.i(A.h)(U,1,function($){return $.getPoints().length}),L=[],W=[];if(I.length===1){L=I[0].item.getPoints();for(var V=0;V<L.length;V++)W.push(L[V].point)}return W}function f(P,U){M.subImageAsCopy(x,i.i(A.b)(P,U)),O.skeletonize()}function l(P,U,I,L){var W,V,$,ee,K=[],re=[],Y=Math.ceil(w.x/3);if(P.length>=2){for(W=0;W<P.length;W++)P[W].m00>Y&&K.push(P[W]);if(K.length>=2){for($=u(K),V=0,W=0;W<$.length;W++)V+=$[W].rad;$.length>1&&$.length>=K.length/4*3&&$.length>P.length/4&&(V/=$.length,ee={index:U[1]*Q.x+U[0],pos:{x:I,y:L},box:[z.clone([I,L]),z.clone([I+x.size.x,L]),z.clone([I+x.size.x,L+x.size.y]),z.clone([I,L+x.size.y])],moments:$,rad:V,vec:z.clone([Math.cos(V),Math.sin(V)])},re.push(ee))}}return re}function d(P){function U(){var K;for(K=0;K<C.data.length;K++)if(C.data[K]===0&&b.data[K]===1)return K;return C.length}function I(K){var re,Y,ne,ce,Z,E={x:K%C.size.x,y:K/C.size.x|0};if(K<C.data.length)for(ne=S.data[K],C.data[K]=V,Z=0;Z<j.a.searchDirections.length;Z++)Y=E.y+j.a.searchDirections[Z][0],re=E.x+j.a.searchDirections[Z][1],ce=Y*C.size.x+re,b.data[ce]!==0?C.data[ce]===0&&Math.abs(z.dot(S.data[ce].vec,ne.vec))>$&&I(ce):C.data[ce]=Number.MAX_VALUE}var L,W,V=0,$=.95,ee=0;for(R.a.init(b.data,0),R.a.init(C.data,0),R.a.init(S.data,null),L=0;L<P.length;L++)W=P[L],S.data[W.index]=W,b.data[W.index]=1;for(b.zeroBorder();(ee=U())<C.data.length;)V++,I(ee);return V}var p,v,_,x,g,b,C,S,M,w,m,O,T=i(20),A=i(19),R=i(3),D=(i(9),i(65)),j=i(30),N=i(66),z={clone:i(7),dot:i(32),scale:i(81),transformMat2:i(82)},F={copy:i(78),create:i(79),invert:i(80)},oe={ctx:{binary:null},dom:{binary:null}},Q={x:0,y:0};y.a={init:function(P,U){p=U,m=P,c(),s()},locate:function(){var P,U;if(p.halfSample&&i.i(A.i)(m,v),o(),P=n(),P.length<Q.x*Q.y*.05)return null;var I=d(P);return I<1?null:(U=t(I),U.length===0?null:r(U))},checkImageConstraints:function(P,U){var I,L,W,V=P.getWidth(),$=P.getHeight(),ee=U.halfSample?.5:1;if(P.getConfig().area&&(W=i.i(A.j)(V,$,P.getConfig().area),P.setTopRight({x:W.sx,y:W.sy}),P.setCanvasSize({x:V,y:$}),V=W.sw,$=W.sh),L={x:Math.floor(V*ee),y:Math.floor($*ee)},I=i.i(A.e)(U.patchSize,L),P.setWidth(Math.floor(Math.floor(L.x/I.x)*(1/ee)*I.x)),P.setHeight(Math.floor(Math.floor(L.y/I.y)*(1/ee)*I.y)),P.getWidth()%I.x==0&&P.getHeight()%I.y==0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width ("+V+" )and height ("+$+") must a multiple of "+I.x)}}}).call(y,i(47))},function(h,y,i){var e=i(30),c={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(s,a){var o=s.data,n=a.data,t=s.size.x,r=s.size.y,u=e.a.create(s,a);return{rasterize:function(f){var l,d,p,v,_,x,g,b,C,S,M,w,m=[],O=0;for(w=0;w<400;w++)m[w]=0;for(m[0]=o[0],C=null,x=1;x<r-1;x++)for(v=0,d=m[0],_=1;_<t-1;_++)if(M=x*t+_,n[M]===0)if((l=o[M])!==d){if(v===0)p=O+1,m[p]=l,d=l,(g=u.contourTracing(x,_,p,l,c.DIR.OUTSIDE_EDGE))!==null&&(O++,v=p,b=c.createContour2D(),b.dir=c.CONTOUR_DIR.CW_DIR,b.index=v,b.firstVertex=g,b.nextpeer=C,b.insideContours=null,C!==null&&(C.prevpeer=b),C=b);else if((g=u.contourTracing(x,_,c.DIR.INSIDE_EDGE,l,v))!==null){for(b=c.createContour2D(),b.firstVertex=g,b.insideContours=null,b.dir=f===0?c.CONTOUR_DIR.CCW_DIR:c.CONTOUR_DIR.CW_DIR,b.index=f,S=C;S!==null&&S.index!==v;)S=S.nextpeer;S!==null&&(b.nextpeer=S.insideContours,S.insideContours!==null&&(S.insideContours.prevpeer=b),S.insideContours=b)}}else n[M]=v;else n[M]===c.DIR.OUTSIDE_EDGE||n[M]===c.DIR.INSIDE_EDGE?(v=0,d=n[M]===c.DIR.INSIDE_EDGE?o[M]:m[0]):(v=n[M],d=m[v]);for(S=C;S!==null;)S.index=f,S=S.nextpeer;return{cc:C,count:O}},debug:{drawContour:function(f,l){var d,p,v,_=f.getContext("2d"),x=l;for(_.strokeStyle="red",_.fillStyle="red",_.lineWidth=1,d=x!==null?x.insideContours:null;x!==null;){switch(d!==null?(p=d,d=d.nextpeer):(p=x,x=x.nextpeer,d=x!==null?x.insideContours:null),p.dir){case c.CONTOUR_DIR.CW_DIR:_.strokeStyle="red";break;case c.CONTOUR_DIR.CCW_DIR:_.strokeStyle="blue";break;case c.CONTOUR_DIR.UNKNOWN_DIR:_.strokeStyle="green"}v=p.firstVertex,_.beginPath(),_.moveTo(v.x,v.y);do v=v.next,_.lineTo(v.x,v.y);while(v!==p.firstVertex);_.stroke()}}}}}};y.a=c},function(h,y,i){function e(c,s,a){var o=new c.Uint8Array(a),n=s.size|0,t=c.Math.imul;function r(g,b){g=g|0,b=b|0;var C=0,S=0,M=0,w=0,m=0,O=0,T=0,A=0;for(C=1;(C|0)<(n-1|0);C=C+1|0)for(A=A+n|0,S=1;(S|0)<(n-1|0);S=S+1|0)w=A-n|0,m=A+n|0,O=S-1|0,T=S+1|0,M=(o[g+w+O|0]|0)+(o[g+w+T|0]|0)+(o[g+A+S|0]|0)+(o[g+m+O|0]|0)+(o[g+m+T|0]|0)|0,(M|0)==5?o[b+A+S|0]=1:o[b+A+S|0]=0}function u(g,b,C){g=g|0,b=b|0,C=C|0;var S=0;for(S=t(n,n)|0;(S|0)>0;)S=S-1|0,o[C+S|0]=(o[g+S|0]|0)-(o[b+S|0]|0)|0}function f(g,b,C){g=g|0,b=b|0,C=C|0;var S=0;for(S=t(n,n)|0;(S|0)>0;)S=S-1|0,o[C+S|0]=o[g+S|0]|0|(o[b+S|0]|0)|0}function l(g){g=g|0;var b=0,C=0;for(C=t(n,n)|0;(C|0)>0;)C=C-1|0,b=(b|0)+(o[g+C|0]|0)|0;return b|0}function d(g,b){g=g|0,b=b|0;var C=0;for(C=t(n,n)|0;(C|0)>0;)C=C-1|0,o[g+C|0]=b}function p(g,b){g=g|0,b=b|0;var C=0,S=0,M=0,w=0,m=0,O=0,T=0,A=0;for(C=1;(C|0)<(n-1|0);C=C+1|0)for(A=A+n|0,S=1;(S|0)<(n-1|0);S=S+1|0)w=A-n|0,m=A+n|0,O=S-1|0,T=S+1|0,M=(o[g+w+O|0]|0)+(o[g+w+T|0]|0)+(o[g+A+S|0]|0)+(o[g+m+O|0]|0)+(o[g+m+T|0]|0)|0,(M|0)>0?o[b+A+S|0]=1:o[b+A+S|0]=0}function v(g,b){g=g|0,b=b|0;var C=0;for(C=t(n,n)|0;(C|0)>0;)C=C-1|0,o[b+C|0]=o[g+C|0]|0}function _(g){g=g|0;var b=0,C=0;for(b=0;(b|0)<(n-1|0);b=b+1|0)o[g+b|0]=0,o[g+C|0]=0,C=C+n-1|0,o[g+C|0]=0,C=C+1|0;for(b=0;(b|0)<(n|0);b=b+1|0)o[g+C|0]=0,C=C+1|0}function x(){var g=0,b=0,C=0,S=0,M=0,w=0;b=t(n,n)|0,C=b+b|0,S=C+b|0,d(S,0),_(g);do r(g,b),p(b,C),u(g,C,C),f(S,C,S),v(b,g),M=l(g)|0,w=(M|0)==0|0;while(!w)}return{skeletonize:x}}y.a=e},function(h,y,i){function e(t){c.a.call(this,t),this.barSpaceRatio=[1,1]}var c=i(1),s=1,a=3,o={START_PATTERN:{value:[a,s,a,s,s,s]},STOP_PATTERN:{value:[a,s,s,s,a]},CODE_PATTERN:{value:[[s,s,a,a,s],[a,s,s,s,a],[s,a,s,s,a],[a,a,s,s,s],[s,s,a,s,a],[a,s,a,s,s],[s,a,a,s,s],[s,s,s,a,a],[a,s,s,a,s],[s,a,s,a,s]]},SINGLE_CODE_ERROR:{value:.78,writable:!0},AVG_CODE_ERROR:{value:.3,writable:!0},FORMAT:{value:"2of5"}},n=o.START_PATTERN.value.reduce(function(t,r){return t+r},0);e.prototype=Object.create(c.a.prototype,o),e.prototype.constructor=e,e.prototype._findPattern=function(t,r,u,f){var l,d,p,v,_=[],x=this,g=0,b={error:Number.MAX_VALUE,code:-1,start:0,end:0},C=x.AVG_CODE_ERROR;for(u=u||!1,f=f||!1,r||(r=x._nextSet(x._row)),l=0;l<t.length;l++)_[l]=0;for(l=r;l<x._row.length;l++)if(x._row[l]^u)_[g]++;else{if(g===_.length-1){for(v=0,p=0;p<_.length;p++)v+=_[p];if((d=x._matchPattern(_,t))<C)return b.error=d,b.start=l-v,b.end=l,b;if(!f)return null;for(p=0;p<_.length-2;p++)_[p]=_[p+2];_[_.length-2]=0,_[_.length-1]=0,g--}else g++;_[g]=1,u=!u}return null},e.prototype._findStart=function(){for(var t,r,u=this,f=u._nextSet(u._row),l=1;!r;){if(!(r=u._findPattern(u.START_PATTERN,f,!1,!0)))return null;if(l=Math.floor((r.end-r.start)/n),(t=r.start-5*l)>=0&&u._matchRange(t,r.start,0))return r;f=r.end,r=null}},e.prototype._verifyTrailingWhitespace=function(t){var r,u=this;return r=t.end+(t.end-t.start)/2,r<u._row.length&&u._matchRange(t.end,r,0)?t:null},e.prototype._findEnd=function(){var t,r,u,f=this;return f._row.reverse(),u=f._nextSet(f._row),t=f._findPattern(f.STOP_PATTERN,u,!1,!0),f._row.reverse(),t===null?null:(r=t.start,t.start=f._row.length-t.end,t.end=f._row.length-r,t!==null?f._verifyTrailingWhitespace(t):null)},e.prototype._decodeCode=function(t){var r,u,f,l=this,d=0,p=l.AVG_CODE_ERROR,v={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(r=0;r<t.length;r++)d+=t[r];for(f=0;f<l.CODE_PATTERN.length;f++)(u=l._matchPattern(t,l.CODE_PATTERN[f]))<v.error&&(v.code=f,v.error=u);if(v.error<p)return v},e.prototype._decodePayload=function(t,r,u){for(var f,l,d=this,p=0,v=t.length,_=[0,0,0,0,0];p<v;){for(f=0;f<5;f++)_[f]=t[p]*this.barSpaceRatio[0],p+=2;if(!(l=d._decodeCode(_)))return null;r.push(l.code+""),u.push(l)}return l},e.prototype._verifyCounterLength=function(t){return t.length%10==0},e.prototype._decode=function(){var t,r,u,f=this,l=[],d=[];return(t=f._findStart())?(d.push(t),(r=f._findEnd())?(u=f._fillCounters(t.end,r.start,!1),f._verifyCounterLength(u)&&f._decodePayload(u,l,d)?l.length<5?null:(d.push(r),{code:l.join(""),start:t.start,end:r.end,startInfo:t,decodedCodes:d}):null):null):null},y.a=e},function(h,y,i){function e(){c.a.call(this),this._counters=[]}var c=i(1),s={ALPHABETH_STRING:{value:"0123456789-$:/.+ABCD"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68]},CHARACTER_ENCODINGS:{value:[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14]},START_END:{value:[26,41,11,14]},MIN_ENCODED_CHARS:{value:4},MAX_ACCEPTABLE:{value:2},PADDING:{value:1.5},FORMAT:{value:"codabar",writeable:!1}};e.prototype=Object.create(c.a.prototype,s),e.prototype.constructor=e,e.prototype._decode=function(){var a,o,n,t,r,u=this,f=[];if(this._counters=u._fillCounters(),!(a=u._findStart()))return null;t=a.startCounter;do{if((n=u._toPattern(t))<0||(o=u._patternToChar(n))<0)return null;if(f.push(o),t+=8,f.length>1&&u._isStartEnd(n))break}while(t<u._counters.length);return f.length-2<u.MIN_ENCODED_CHARS||!u._isStartEnd(n)?null:u._verifyWhitespace(a.startCounter,t-8)&&u._validateResult(f,a.startCounter)?(t=t>u._counters.length?u._counters.length:t,r=a.start+u._sumCounters(a.startCounter,t-8),{code:f.join(""),start:a.start,end:r,startInfo:a,decodedCodes:f}):null},e.prototype._verifyWhitespace=function(a,o){return(a-1<=0||this._counters[a-1]>=this._calculatePatternLength(a)/2)&&(o+8>=this._counters.length||this._counters[o+7]>=this._calculatePatternLength(o)/2)},e.prototype._calculatePatternLength=function(a){var o,n=0;for(o=a;o<a+7;o++)n+=this._counters[o];return n},e.prototype._thresholdResultPattern=function(a,o){var n,t,r,u,f,l=this,d={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},p=o;for(r=0;r<a.length;r++){for(f=l._charToPattern(a[r]),u=6;u>=0;u--)n=(1&u)==2?d.bar:d.space,t=(1&f)==1?n.wide:n.narrow,t.size+=l._counters[p+u],t.counts++,f>>=1;p+=8}return["space","bar"].forEach(function(v){var _=d[v];_.wide.min=Math.floor((_.narrow.size/_.narrow.counts+_.wide.size/_.wide.counts)/2),_.narrow.max=Math.ceil(_.wide.min),_.wide.max=Math.ceil((_.wide.size*l.MAX_ACCEPTABLE+l.PADDING)/_.wide.counts)}),d},e.prototype._charToPattern=function(a){var o,n=this,t=a.charCodeAt(0);for(o=0;o<n.ALPHABET.length;o++)if(n.ALPHABET[o]===t)return n.CHARACTER_ENCODINGS[o];return 0},e.prototype._validateResult=function(a,o){var n,t,r,u,f,l,d=this,p=d._thresholdResultPattern(a,o),v=o;for(n=0;n<a.length;n++){for(l=d._charToPattern(a[n]),t=6;t>=0;t--){if(r=1&t?p.space:p.bar,u=(1&l)==1?r.wide:r.narrow,(f=d._counters[v+t])<u.min||f>u.max)return!1;l>>=1}v+=8}return!0},e.prototype._patternToChar=function(a){var o,n=this;for(o=0;o<n.CHARACTER_ENCODINGS.length;o++)if(n.CHARACTER_ENCODINGS[o]===a)return String.fromCharCode(n.ALPHABET[o]);return-1},e.prototype._computeAlternatingThreshold=function(a,o){var n,t,r=Number.MAX_VALUE,u=0;for(n=a;n<o;n+=2)t=this._counters[n],t>u&&(u=t),t<r&&(r=t);return(r+u)/2|0},e.prototype._toPattern=function(a){var o,n,t,r,u=7,f=a+u,l=1<<u-1,d=0;if(f>this._counters.length)return-1;for(o=this._computeAlternatingThreshold(a,f),n=this._computeAlternatingThreshold(a+1,f),t=0;t<u;t++)r=1&t?n:o,this._counters[a+t]>r&&(d|=l),l>>=1;return d},e.prototype._isStartEnd=function(a){var o;for(o=0;o<this.START_END.length;o++)if(this.START_END[o]===a)return!0;return!1},e.prototype._sumCounters=function(a,o){var n,t=0;for(n=a;n<o;n++)t+=this._counters[n];return t},e.prototype._findStart=function(){var a,o,n,t=this,r=t._nextUnset(t._row);for(a=1;a<this._counters.length;a++)if((o=t._toPattern(a))!==-1&&t._isStartEnd(o))return r+=t._sumCounters(0,a),n=r+t._sumCounters(a,a+8),{start:r,end:n,startCounter:a,endCounter:a+8}},y.a=e},function(h,y,i){function e(){s.a.call(this)}function c(o,n,t){for(var r=t.length,u=0,f=0;r--;)f+=o[t[r]],u+=n[t[r]];return f/u}var s=i(1),a={CODE_SHIFT:{value:98},CODE_C:{value:99},CODE_B:{value:100},CODE_A:{value:101},START_CODE_A:{value:103},START_CODE_B:{value:104},START_CODE_C:{value:105},STOP_CODE:{value:106},CODE_PATTERN:{value:[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]},SINGLE_CODE_ERROR:{value:.64},AVG_CODE_ERROR:{value:.3},FORMAT:{value:"code_128",writeable:!1},MODULE_INDICES:{value:{bar:[0,2,4],space:[1,3,5]}}};e.prototype=Object.create(s.a.prototype,a),e.prototype.constructor=e,e.prototype._decodeCode=function(o,n){var t,r,u,f=[0,0,0,0,0,0],l=this,d=o,p=!l._row[d],v=0,_={error:Number.MAX_VALUE,code:-1,start:o,end:o,correction:{bar:1,space:1}};for(t=d;t<l._row.length;t++)if(l._row[t]^p)f[v]++;else{if(v===f.length-1){for(n&&l._correct(f,n),r=0;r<l.CODE_PATTERN.length;r++)(u=l._matchPattern(f,l.CODE_PATTERN[r]))<_.error&&(_.code=r,_.error=u);return _.end=t,_.code===-1||_.error>l.AVG_CODE_ERROR?null:(l.CODE_PATTERN[_.code]&&(_.correction.bar=c(l.CODE_PATTERN[_.code],f,this.MODULE_INDICES.bar),_.correction.space=c(l.CODE_PATTERN[_.code],f,this.MODULE_INDICES.space)),_)}v++,f[v]=1,p=!p}return null},e.prototype._correct=function(o,n){this._correctBars(o,n.bar,this.MODULE_INDICES.bar),this._correctBars(o,n.space,this.MODULE_INDICES.space)},e.prototype._findStart=function(){var o,n,t,r,u,f=[0,0,0,0,0,0],l=this,d=l._nextSet(l._row),p=!1,v=0,_={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}};for(o=d;o<l._row.length;o++)if(l._row[o]^p)f[v]++;else{if(v===f.length-1){for(u=0,r=0;r<f.length;r++)u+=f[r];for(n=l.START_CODE_A;n<=l.START_CODE_C;n++)(t=l._matchPattern(f,l.CODE_PATTERN[n]))<_.error&&(_.code=n,_.error=t);if(_.error<l.AVG_CODE_ERROR)return _.start=o-u,_.end=o,_.correction.bar=c(l.CODE_PATTERN[_.code],f,this.MODULE_INDICES.bar),_.correction.space=c(l.CODE_PATTERN[_.code],f,this.MODULE_INDICES.space),_;for(r=0;r<4;r++)f[r]=f[r+2];f[4]=0,f[5]=0,v--}else v++;f[v]=1,p=!p}return null},e.prototype._decode=function(){var o,n,t=this,r=t._findStart(),u=null,f=!1,l=[],d=0,p=0,v=[],_=[],x=!1,g=!0;if(r===null)return null;switch(u={code:r.code,start:r.start,end:r.end,correction:{bar:r.correction.bar,space:r.correction.space}},_.push(u),p=u.code,u.code){case t.START_CODE_A:o=t.CODE_A;break;case t.START_CODE_B:o=t.CODE_B;break;case t.START_CODE_C:o=t.CODE_C;break;default:return null}for(;!f;){if(n=x,x=!1,(u=t._decodeCode(u.end,u.correction))!==null)switch(u.code!==t.STOP_CODE&&(g=!0),u.code!==t.STOP_CODE&&(v.push(u.code),d++,p+=d*u.code),_.push(u),o){case t.CODE_A:if(u.code<64)l.push(String.fromCharCode(32+u.code));else if(u.code<96)l.push(String.fromCharCode(u.code-64));else switch(u.code!==t.STOP_CODE&&(g=!1),u.code){case t.CODE_SHIFT:x=!0,o=t.CODE_B;break;case t.CODE_B:o=t.CODE_B;break;case t.CODE_C:o=t.CODE_C;break;case t.STOP_CODE:f=!0}break;case t.CODE_B:if(u.code<96)l.push(String.fromCharCode(32+u.code));else switch(u.code!==t.STOP_CODE&&(g=!1),u.code){case t.CODE_SHIFT:x=!0,o=t.CODE_A;break;case t.CODE_A:o=t.CODE_A;break;case t.CODE_C:o=t.CODE_C;break;case t.STOP_CODE:f=!0}break;case t.CODE_C:if(u.code<100)l.push(u.code<10?"0"+u.code:u.code);else switch(u.code!==t.STOP_CODE&&(g=!1),u.code){case t.CODE_A:o=t.CODE_A;break;case t.CODE_B:o=t.CODE_B;break;case t.STOP_CODE:f=!0}}else f=!0;n&&(o=o===t.CODE_A?t.CODE_B:t.CODE_A)}return u===null?null:(u.end=t._nextUnset(t._row,u.end),t._verifyTrailingWhitespace(u)?(p-=d*v[v.length-1])%103!==v[v.length-1]?null:l.length?(g&&l.splice(l.length-1,1),{code:l.join(""),start:r.start,end:u.end,codeset:o,startInfo:r,decodedCodes:_,endInfo:u}):null:null)},s.a.prototype._verifyTrailingWhitespace=function(o){var n,t=this;return n=o.end+(o.end-o.start)/2,n<t._row.length&&t._matchRange(o.end,n,0)?o:null},y.a=e},function(h,y,i){function e(){c.a.call(this)}var c=i(31),s={IOQ:/[IOQ]/g,AZ09:/[A-Z0-9]{17}/};e.prototype=Object.create(c.a.prototype),e.prototype.constructor=e,e.prototype._decode=function(){var a=c.a.prototype._decode.apply(this);if(!a)return null;var o=a.code;return o?(o=o.replace(s.IOQ,""),o.match(s.AZ09)&&this._checkChecksum(o)?(a.code=o,a):null):null},e.prototype._checkChecksum=function(a){return!!a},y.a=e},function(h,y,i){function e(){c.a.call(this)}var c=i(1),s=i(3),a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",o={ALPHABETH_STRING:{value:a},ALPHABET:{value:a.split("").map(function(n){return n.charCodeAt(0)})},CHARACTER_ENCODINGS:{value:[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350]},ASTERISK:{value:350},FORMAT:{value:"code_93",writeable:!1}};e.prototype=Object.create(c.a.prototype,o),e.prototype.constructor=e,e.prototype._decode=function(){var n,t,r,u,f=this,l=[0,0,0,0,0,0],d=[],p=f._findStart();if(!p)return null;u=f._nextSet(f._row,p.end);do{if(l=f._toCounters(u,l),(r=f._toPattern(l))<0||(n=f._patternToChar(r))<0)return null;d.push(n),t=u,u+=s.a.sum(l),u=f._nextSet(f._row,u)}while(n!=="*");return d.pop(),d.length&&f._verifyEnd(t,u,l)&&f._verifyChecksums(d)?(d=d.slice(0,d.length-2),(d=f._decodeExtended(d))===null?null:{code:d.join(""),start:p.start,end:u,startInfo:p,decodedCodes:d}):null},e.prototype._verifyEnd=function(n,t){return!(n===t||!this._row[t])},e.prototype._patternToChar=function(n){var t,r=this;for(t=0;t<r.CHARACTER_ENCODINGS.length;t++)if(r.CHARACTER_ENCODINGS[t]===n)return String.fromCharCode(r.ALPHABET[t]);return-1},e.prototype._toPattern=function(n){for(var t=n.length,r=0,u=0,f=0;f<t;f++)u+=n[f];for(var l=0;l<t;l++){var d=Math.round(9*n[l]/u);if(d<1||d>4)return-1;if(1&l)r<<=d;else for(var p=0;p<d;p++)r=r<<1|1}return r},e.prototype._findStart=function(){var n,t,r,u=this,f=u._nextSet(u._row),l=f,d=[0,0,0,0,0,0],p=0,v=!1;for(n=f;n<u._row.length;n++)if(u._row[n]^v)d[p]++;else{if(p===d.length-1){if(u._toPattern(d)===u.ASTERISK&&(r=Math.floor(Math.max(0,l-(n-l)/4)),u._matchRange(r,l,0)))return{start:l,end:n};for(l+=d[0]+d[1],t=0;t<4;t++)d[t]=d[t+2];d[4]=0,d[5]=0,p--}else p++;d[p]=1,v=!v}return null},e.prototype._decodeExtended=function(n){for(var t=n.length,r=[],u=0;u<t;u++){var f=n[u];if(f>="a"&&f<="d"){if(u>t-2)return null;var l=n[++u],d=l.charCodeAt(0),p=void 0;switch(f){case"a":if(!(l>="A"&&l<="Z"))return null;p=String.fromCharCode(d-64);break;case"b":if(l>="A"&&l<="E")p=String.fromCharCode(d-38);else if(l>="F"&&l<="J")p=String.fromCharCode(d-11);else if(l>="K"&&l<="O")p=String.fromCharCode(d+16);else if(l>="P"&&l<="S")p=String.fromCharCode(d+43);else{if(!(l>="T"&&l<="Z"))return null;p=String.fromCharCode(127)}break;case"c":if(l>="A"&&l<="O")p=String.fromCharCode(d-32);else{if(l!=="Z")return null;p=":"}break;case"d":if(!(l>="A"&&l<="Z"))return null;p=String.fromCharCode(d+32)}r.push(p)}else r.push(f)}return r},e.prototype._verifyChecksums=function(n){return this._matchCheckChar(n,n.length-2,20)&&this._matchCheckChar(n,n.length-1,15)},e.prototype._matchCheckChar=function(n,t,r){var u=this,f=n.slice(0,t),l=f.length,d=f.reduce(function(p,v,_){return p+((_*-1+(l-1))%r+1)*u.ALPHABET.indexOf(v.charCodeAt(0))},0);return this.ALPHABET[d%47]===n[t].charCodeAt(0)},y.a=e},function(h,y,i){function e(){c.a.call(this)}var c=i(4),s={FORMAT:{value:"ean_2",writeable:!1}};e.prototype=Object.create(c.a.prototype,s),e.prototype.constructor=e,e.prototype.decode=function(a,o){this._row=a;var n,t=0,r=0,u=o,f=this._row.length,l=[],d=[];for(r=0;r<2&&u<f;r++){if(!(n=this._decodeCode(u)))return null;d.push(n),l.push(n.code%10),n.code>=this.CODE_G_START&&(t|=1<<1-r),r!=1&&(u=this._nextSet(this._row,n.end),u=this._nextUnset(this._row,u))}return l.length!=2||parseInt(l.join(""))%4!==t?null:{code:l.join(""),decodedCodes:d,end:n.end}},y.a=e},function(h,y,i){function e(){a.a.call(this)}function c(t){var r;for(r=0;r<10;r++)if(t===n[r])return r;return null}function s(t){var r,u=t.length,f=0;for(r=u-2;r>=0;r-=2)f+=t[r];for(f*=3,r=u-1;r>=0;r-=2)f+=t[r];return(f*=3)%10}var a=i(4),o={FORMAT:{value:"ean_5",writeable:!1}},n=[24,20,18,17,12,6,3,10,9,5];e.prototype=Object.create(a.a.prototype,o),e.prototype.constructor=e,e.prototype.decode=function(t,r){this._row=t;var u,f=0,l=0,d=r,p=this._row.length,v=[],_=[];for(l=0;l<5&&d<p;l++){if(!(u=this._decodeCode(d)))return null;_.push(u),v.push(u.code%10),u.code>=this.CODE_G_START&&(f|=1<<4-l),l!=4&&(d=this._nextSet(this._row,u.end),d=this._nextUnset(this._row,d))}return v.length!=5||s(v)!==c(f)?null:{code:v.join(""),decodedCodes:_,end:u.end}},y.a=e},function(h,y,i){function e(a,o){c.a.call(this,a,o)}var c=i(4),s={FORMAT:{value:"ean_8",writeable:!1}};e.prototype=Object.create(c.a.prototype,s),e.prototype.constructor=e,e.prototype._decodePayload=function(a,o,n){var t,r=this;for(t=0;t<4;t++){if(!(a=r._decodeCode(a.end,r.CODE_G_START)))return null;o.push(a.code),n.push(a)}if((a=r._findPattern(r.MIDDLE_PATTERN,a.end,!0,!1))===null)return null;for(n.push(a),t=0;t<4;t++){if(!(a=r._decodeCode(a.end,r.CODE_G_START)))return null;n.push(a),o.push(a.code)}return a},y.a=e},function(h,y,i){function e(u){u=a()(c(),u),o.a.call(this,u),this.barSpaceRatio=[1,1],u.normalizeBarSpaceWidth&&(this.SINGLE_CODE_ERROR=.38,this.AVG_CODE_ERROR=.09)}function c(){var u={};return Object.keys(e.CONFIG_KEYS).forEach(function(f){u[f]=e.CONFIG_KEYS[f].default}),u}var s=i(28),a=i.n(s),o=i(1),n=1,t=3,r={START_PATTERN:{value:[n,n,n,n]},STOP_PATTERN:{value:[n,n,t]},CODE_PATTERN:{value:[[n,n,t,t,n],[t,n,n,n,t],[n,t,n,n,t],[t,t,n,n,n],[n,n,t,n,t],[t,n,t,n,n],[n,t,t,n,n],[n,n,n,t,t],[t,n,n,t,n],[n,t,n,t,n]]},SINGLE_CODE_ERROR:{value:.78,writable:!0},AVG_CODE_ERROR:{value:.38,writable:!0},MAX_CORRECTION_FACTOR:{value:5},FORMAT:{value:"i2of5"}};e.prototype=Object.create(o.a.prototype,r),e.prototype.constructor=e,e.prototype._matchPattern=function(u,f){if(this.config.normalizeBarSpaceWidth){var l,d=[0,0],p=[0,0],v=[0,0],_=this.MAX_CORRECTION_FACTOR,x=1/_;for(l=0;l<u.length;l++)d[l%2]+=u[l],p[l%2]+=f[l];for(v[0]=p[0]/d[0],v[1]=p[1]/d[1],v[0]=Math.max(Math.min(v[0],_),x),v[1]=Math.max(Math.min(v[1],_),x),this.barSpaceRatio=v,l=0;l<u.length;l++)u[l]*=this.barSpaceRatio[l%2]}return o.a.prototype._matchPattern.call(this,u,f)},e.prototype._findPattern=function(u,f,l,d){var p,v,_,x,g=[],b=this,C=0,S={error:Number.MAX_VALUE,code:-1,start:0,end:0},M=b.AVG_CODE_ERROR;for(l=l||!1,d=d||!1,f||(f=b._nextSet(b._row)),p=0;p<u.length;p++)g[p]=0;for(p=f;p<b._row.length;p++)if(b._row[p]^l)g[C]++;else{if(C===g.length-1){for(x=0,_=0;_<g.length;_++)x+=g[_];if((v=b._matchPattern(g,u))<M)return S.error=v,S.start=p-x,S.end=p,S;if(!d)return null;for(_=0;_<g.length-2;_++)g[_]=g[_+2];g[g.length-2]=0,g[g.length-1]=0,C--}else C++;g[C]=1,l=!l}return null},e.prototype._findStart=function(){for(var u,f,l=this,d=l._nextSet(l._row),p=1;!f;){if(!(f=l._findPattern(l.START_PATTERN,d,!1,!0)))return null;if(p=Math.floor((f.end-f.start)/4),(u=f.start-10*p)>=0&&l._matchRange(u,f.start,0))return f;d=f.end,f=null}},e.prototype._verifyTrailingWhitespace=function(u){var f,l=this;return f=u.end+(u.end-u.start)/2,f<l._row.length&&l._matchRange(u.end,f,0)?u:null},e.prototype._findEnd=function(){var u,f,l=this;return l._row.reverse(),u=l._findPattern(l.STOP_PATTERN),l._row.reverse(),u===null?null:(f=u.start,u.start=l._row.length-u.end,u.end=l._row.length-f,u!==null?l._verifyTrailingWhitespace(u):null)},e.prototype._decodePair=function(u){var f,l,d=[],p=this;for(f=0;f<u.length;f++){if(!(l=p._decodeCode(u[f])))return null;d.push(l)}return d},e.prototype._decodeCode=function(u){var f,l,d,p=this,v=0,_=p.AVG_CODE_ERROR,x={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(f=0;f<u.length;f++)v+=u[f];for(d=0;d<p.CODE_PATTERN.length;d++)(l=p._matchPattern(u,p.CODE_PATTERN[d]))<x.error&&(x.code=d,x.error=l);if(x.error<_)return x},e.prototype._decodePayload=function(u,f,l){for(var d,p,v=this,_=0,x=u.length,g=[[0,0,0,0,0],[0,0,0,0,0]];_<x;){for(d=0;d<5;d++)g[0][d]=u[_]*this.barSpaceRatio[0],g[1][d]=u[_+1]*this.barSpaceRatio[1],_+=2;if(!(p=v._decodePair(g)))return null;for(d=0;d<p.length;d++)f.push(p[d].code+""),l.push(p[d])}return p},e.prototype._verifyCounterLength=function(u){return u.length%10==0},e.prototype._decode=function(){var u,f,l,d=this,p=[],v=[];return(u=d._findStart())?(v.push(u),(f=d._findEnd())?(l=d._fillCounters(u.end,f.start,!1),d._verifyCounterLength(l)&&d._decodePayload(l,p,v)?p.length%2!=0||p.length<6?null:(v.push(f),{code:p.join(""),start:u.start,end:f.end,startInfo:u,decodedCodes:v}):null):null):null},e.CONFIG_KEYS={normalizeBarSpaceWidth:{type:"boolean",default:!1,description:"If true, the reader tries to normalize thewidth-difference between bars and spaces"}},y.a=e},function(h,y,i){function e(a,o){c.a.call(this,a,o)}var c=i(4),s={CODE_FREQUENCY:{value:[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]},STOP_PATTERN:{value:[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]},FORMAT:{value:"upc_e",writeable:!1}};e.prototype=Object.create(c.a.prototype,s),e.prototype.constructor=e,e.prototype._decodePayload=function(a,o,n){var t,r=this,u=0;for(t=0;t<6;t++){if(!(a=r._decodeCode(a.end)))return null;a.code>=r.CODE_G_START&&(a.code=a.code-r.CODE_G_START,u|=1<<5-t),o.push(a.code),n.push(a)}return r._determineParity(u,o)?a:null},e.prototype._determineParity=function(a,o){var n,t;for(t=0;t<this.CODE_FREQUENCY.length;t++)for(n=0;n<this.CODE_FREQUENCY[t].length;n++)if(a===this.CODE_FREQUENCY[t][n])return o.unshift(t),o.push(n),!0;return!1},e.prototype._convertToUPCA=function(a){var o=[a[0]],n=a[a.length-2];return o=n<=2?o.concat(a.slice(1,3)).concat([n,0,0,0,0]).concat(a.slice(3,6)):n===3?o.concat(a.slice(1,4)).concat([0,0,0,0,0]).concat(a.slice(4,6)):n===4?o.concat(a.slice(1,5)).concat([0,0,0,0,0,a[5]]):o.concat(a.slice(1,6)).concat([0,0,0,0,n]),o.push(a[a.length-1]),o},e.prototype._checksum=function(a){return c.a.prototype._checksum.call(this,this._convertToUPCA(a))},e.prototype._findEnd=function(a,o){return o=!0,c.a.prototype._findEnd.call(this,a,o)},e.prototype._verifyTrailingWhitespace=function(a){var o,n=this;if((o=a.end+(a.end-a.start)/2)<n._row.length&&n._matchRange(a.end,o,0))return a},y.a=e},function(h,y,i){function e(a,o){c.a.call(this,a,o)}var c=i(4),s={FORMAT:{value:"upc_a",writeable:!1}};e.prototype=Object.create(c.a.prototype,s),e.prototype.constructor=e,e.prototype._decode=function(){var a=c.a.prototype._decode.call(this);return a&&a.code&&a.code.length===13&&a.code.charAt(0)==="0"?(a.code=a.code.substring(1),a):null},y.a=e},function(h,y){function i(e,c){return e[0]=c[0],e[1]=c[1],e[2]=c[2],e[3]=c[3],e}h.exports=i},function(h,y){function i(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}h.exports=i},function(h,y){function i(e,c){var s=c[0],a=c[1],o=c[2],n=c[3],t=s*n-o*a;return t?(t=1/t,e[0]=n*t,e[1]=-a*t,e[2]=-o*t,e[3]=s*t,e):null}h.exports=i},function(h,y){function i(e,c,s){return e[0]=c[0]*s,e[1]=c[1]*s,e}h.exports=i},function(h,y){function i(e,c,s){var a=c[0],o=c[1];return e[0]=s[0]*a+s[2]*o,e[1]=s[1]*a+s[3]*o,e}h.exports=i},function(h,y){function i(e){var c=new Float32Array(3);return c[0]=e[0],c[1]=e[1],c[2]=e[2],c}h.exports=i},function(h,y,i){function e(t){var r=-1,u=t==null?0:t.length;for(this.clear();++r<u;){var f=t[r];this.set(f[0],f[1])}}var c=i(122),s=i(123),a=i(124),o=i(125),n=i(126);e.prototype.clear=c,e.prototype.delete=s,e.prototype.get=a,e.prototype.has=o,e.prototype.set=n,h.exports=e},function(h,y,i){function e(r){var u=this.__data__=new c(r);this.size=u.size}var c=i(10),s=i(149),a=i(150),o=i(151),n=i(152),t=i(153);e.prototype.clear=s,e.prototype.delete=a,e.prototype.get=o,e.prototype.has=n,e.prototype.set=t,h.exports=e},function(h,y,i){var e=i(5),c=e.Uint8Array;h.exports=c},function(h,y){function i(e,c,s){switch(s.length){case 0:return e.call(c);case 1:return e.call(c,s[0]);case 2:return e.call(c,s[0],s[1]);case 3:return e.call(c,s[0],s[1],s[2])}return e.apply(c,s)}h.exports=i},function(h,y,i){function e(f,l){var d=a(f),p=!d&&s(f),v=!d&&!p&&o(f),_=!d&&!p&&!v&&t(f),x=d||p||v||_,g=x?c(f.length,String):[],b=g.length;for(var C in f)!l&&!u.call(f,C)||x&&(C=="length"||v&&(C=="offset"||C=="parent")||_&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||n(C,b))||g.push(C);return g}var c=i(107),s=i(18),a=i(2),o=i(44),n=i(15),t=i(45),r=Object.prototype,u=r.hasOwnProperty;h.exports=e},function(h,y){function i(e,c){for(var s=-1,a=e==null?0:e.length,o=Array(a);++s<a;)o[s]=c(e[s],s,e);return o}h.exports=i},function(h,y){function i(e,c){for(var s=-1,a=c.length,o=e.length;++s<a;)e[o+s]=c[s];return e}h.exports=i},function(h,y,i){var e=i(0),c=Object.create,s=function(){function a(){}return function(o){if(!e(o))return{};if(c)return c(o);a.prototype=o;var n=new a;return a.prototype=void 0,n}}();h.exports=s},function(h,y,i){function e(a,o,n,t,r){var u=-1,f=a.length;for(n||(n=s),r||(r=[]);++u<f;){var l=a[u];o>0&&n(l)?o>1?e(l,o-1,n,t,r):c(r,l):t||(r[r.length]=l)}return r}var c=i(90),s=i(128);h.exports=e},function(h,y,i){var e=i(117),c=e();h.exports=c},function(h,y,i){function e(a,o){o=c(o,a);for(var n=0,t=o.length;a!=null&&n<t;)a=a[s(o[n++])];return n&&n==t?a:void 0}var c=i(13),s=i(23);h.exports=e},function(h,y){function i(e,c){return e!=null&&c in Object(e)}h.exports=i},function(h,y,i){function e(o){return s(o)&&c(o)==a}var c=i(8),s=i(6),a="[object Arguments]";h.exports=e},function(h,y,i){function e(p){return!(!a(p)||s(p))&&(c(p)?d:t).test(o(p))}var c=i(25),s=i(132),a=i(0),o=i(155),n=/[\\^$.*+?()[\]{}|]/g,t=/^\[object .+?Constructor\]$/,r=Function.prototype,u=Object.prototype,f=r.toString,l=u.hasOwnProperty,d=RegExp("^"+f.call(l).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");h.exports=e},function(h,y,i){function e(n){return a(n)&&s(n.length)&&!!o[c(n)]}var c=i(8),s=i(26),a=i(6),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,h.exports=e},function(h,y,i){function e(t){if(!c(t))return a(t);var r=s(t),u=[];for(var f in t)(f!="constructor"||!r&&n.call(t,f))&&u.push(f);return u}var c=i(0),s=i(40),a=i(144),o=Object.prototype,n=o.hasOwnProperty;h.exports=e},function(h,y,i){function e(r,u,f,l,d){r!==u&&a(u,function(p,v){if(n(p))d||(d=new c),o(r,u,v,f,e,l,d);else{var _=l?l(r[v],p,v+"",r,u,d):void 0;_===void 0&&(_=p),s(r,v,_)}},t)}var c=i(85),s=i(35),a=i(93),o=i(101),n=i(0),t=i(46);h.exports=e},function(h,y,i){function e(x,g,b,C,S,M,w){var m=x[b],O=g[b],T=w.get(O);if(T)return void c(x,b,T);var A=M?M(m,O,b+"",x,g,w):void 0,R=A===void 0;if(R){var D=r(O),j=!D&&f(O),N=!D&&!j&&v(O);A=O,D||j||N?r(m)?A=m:u(m)?A=o(m):j?(R=!1,A=s(O,!0)):N?(R=!1,A=a(O,!0)):A=[]:p(O)||t(O)?(A=m,t(m)?A=_(m):(!d(m)||C&&l(m))&&(A=n(O))):R=!1}R&&(w.set(O,A),S(A,O,C,M,w),w.delete(O)),c(x,b,A)}var c=i(35),s=i(111),a=i(112),o=i(113),n=i(127),t=i(18),r=i(2),u=i(159),f=i(44),l=i(25),d=i(0),p=i(160),v=i(45),_=i(164);h.exports=e},function(h,y,i){function e(a,o){return c(a,o,function(n,t){return s(a,t)})}var c=i(103),s=i(158);h.exports=e},function(h,y,i){function e(o,n,t){for(var r=-1,u=n.length,f={};++r<u;){var l=n[r],d=c(o,l);t(d,l)&&s(f,a(l,o),d)}return f}var c=i(94),s=i(105),a=i(13);h.exports=e},function(h,y,i){function e(o,n){return a(s(o,n,c),o+"")}var c=i(43),s=i(41),a=i(42);h.exports=e},function(h,y,i){function e(t,r,u,f){if(!o(t))return t;r=s(r,t);for(var l=-1,d=r.length,p=d-1,v=t;v!=null&&++l<d;){var _=n(r[l]),x=u;if(l!=p){var g=v[_];x=f?f(g,_,v):void 0,x===void 0&&(x=o(g)?g:a(r[l+1])?[]:{})}c(v,_,x),v=v[_]}return t}var c=i(36),s=i(13),a=i(15),o=i(0),n=i(23);h.exports=e},function(h,y,i){var e=i(156),c=i(37),s=i(43),a=c?function(o,n){return c(o,"toString",{configurable:!0,enumerable:!1,value:e(n),writable:!0})}:s;h.exports=a},function(h,y){function i(e,c){for(var s=-1,a=Array(e);++s<e;)a[s]=c(s);return a}h.exports=i},function(h,y,i){function e(u){if(typeof u=="string")return u;if(a(u))return s(u,e)+"";if(o(u))return r?r.call(u):"";var f=u+"";return f=="0"&&1/u==-n?"-0":f}var c=i(11),s=i(89),a=i(2),o=i(27),n=1/0,t=c?c.prototype:void 0,r=t?t.toString:void 0;h.exports=e},function(h,y){function i(e){return function(c){return e(c)}}h.exports=i},function(h,y,i){function e(s){var a=new s.constructor(s.byteLength);return new c(a).set(new c(s)),a}var c=i(86);h.exports=e},function(h,y,i){(function(e){function c(u,f){if(f)return u.slice();var l=u.length,d=r?r(l):new u.constructor(l);return u.copy(d),d}var s=i(5),a=typeof y=="object"&&y&&!y.nodeType&&y,o=a&&typeof e=="object"&&e&&!e.nodeType&&e,n=o&&o.exports===a,t=n?s.Buffer:void 0,r=t?t.allocUnsafe:void 0;e.exports=c}).call(y,i(29)(h))},function(h,y,i){function e(s,a){var o=a?c(s.buffer):s.buffer;return new s.constructor(o,s.byteOffset,s.length)}var c=i(110);h.exports=e},function(h,y){function i(e,c){var s=-1,a=e.length;for(c||(c=Array(a));++s<a;)c[s]=e[s];return c}h.exports=i},function(h,y,i){function e(a,o,n,t){var r=!n;n||(n={});for(var u=-1,f=o.length;++u<f;){var l=o[u],d=t?t(n[l],a[l],l,n,a):void 0;d===void 0&&(d=a[l]),r?s(n,l,d):c(n,l,d)}return n}var c=i(36),s=i(21);h.exports=e},function(h,y,i){var e=i(5),c=e["__core-js_shared__"];h.exports=c},function(h,y,i){function e(a){return c(function(o,n){var t=-1,r=n.length,u=r>1?n[r-1]:void 0,f=r>2?n[2]:void 0;for(u=a.length>3&&typeof u=="function"?(r--,u):void 0,f&&s(n[0],n[1],f)&&(u=r<3?void 0:u,r=1),o=Object(o);++t<r;){var l=n[t];l&&a(o,l,t,u)}return o})}var c=i(104),s=i(129);h.exports=e},function(h,y){function i(e){return function(c,s,a){for(var o=-1,n=Object(c),t=a(c),r=t.length;r--;){var u=t[e?r:++o];if(s(n[u],u,n)===!1)break}return c}}h.exports=i},function(h,y,i){function e(o){return a(s(o,void 0,c),o+"")}var c=i(157),s=i(41),a=i(42);h.exports=e},function(h,y,i){function e(t){var r=a.call(t,n),u=t[n];try{t[n]=void 0;var f=!0}catch{}var l=o.call(t);return f&&(r?t[n]=u:delete t[n]),l}var c=i(11),s=Object.prototype,a=s.hasOwnProperty,o=s.toString,n=c?c.toStringTag:void 0;h.exports=e},function(h,y){function i(e,c){return e==null?void 0:e[c]}h.exports=i},function(h,y,i){function e(r,u,f){u=c(u,r);for(var l=-1,d=u.length,p=!1;++l<d;){var v=t(u[l]);if(!(p=r!=null&&f(r,v)))break;r=r[v]}return p||++l!=d?p:!!(d=r==null?0:r.length)&&n(d)&&o(v,d)&&(a(r)||s(r))}var c=i(13),s=i(18),a=i(2),o=i(15),n=i(26),t=i(23);h.exports=e},function(h,y,i){function e(){this.__data__=c?c(null):{},this.size=0}var c=i(16);h.exports=e},function(h,y){function i(e){var c=this.has(e)&&delete this.__data__[e];return this.size-=c?1:0,c}h.exports=i},function(h,y,i){function e(n){var t=this.__data__;if(c){var r=t[n];return r===s?void 0:r}return o.call(t,n)?t[n]:void 0}var c=i(16),s="__lodash_hash_undefined__",a=Object.prototype,o=a.hasOwnProperty;h.exports=e},function(h,y,i){function e(o){var n=this.__data__;return c?n[o]!==void 0:a.call(n,o)}var c=i(16),s=Object.prototype,a=s.hasOwnProperty;h.exports=e},function(h,y,i){function e(a,o){var n=this.__data__;return this.size+=this.has(a)?0:1,n[a]=c&&o===void 0?s:o,this}var c=i(16),s="__lodash_hash_undefined__";h.exports=e},function(h,y,i){function e(o){return typeof o.constructor!="function"||a(o)?{}:c(s(o))}var c=i(91),s=i(39),a=i(40);h.exports=e},function(h,y,i){function e(n){return a(n)||s(n)||!!(o&&n&&n[o])}var c=i(11),s=i(18),a=i(2),o=c?c.isConcatSpreadable:void 0;h.exports=e},function(h,y,i){function e(n,t,r){if(!o(r))return!1;var u=typeof t;return!!(u=="number"?s(r)&&a(t,r.length):u=="string"&&t in r)&&c(r[t],n)}var c=i(17),s=i(24),a=i(15),o=i(0);h.exports=e},function(h,y,i){function e(n,t){if(c(n))return!1;var r=typeof n;return!(r!="number"&&r!="symbol"&&r!="boolean"&&n!=null&&!s(n))||o.test(n)||!a.test(n)||t!=null&&n in Object(t)}var c=i(2),s=i(27),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;h.exports=e},function(h,y){function i(e){var c=typeof e;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?e!=="__proto__":e===null}h.exports=i},function(h,y,i){function e(a){return!!s&&s in a}var c=i(115),s=function(){var a=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();h.exports=e},function(h,y){function i(){this.__data__=[],this.size=0}h.exports=i},function(h,y,i){function e(o){var n=this.__data__,t=c(n,o);return!(t<0)&&(t==n.length-1?n.pop():a.call(n,t,1),--this.size,!0)}var c=i(12),s=Array.prototype,a=s.splice;h.exports=e},function(h,y,i){function e(s){var a=this.__data__,o=c(a,s);return o<0?void 0:a[o][1]}var c=i(12);h.exports=e},function(h,y,i){function e(s){return c(this.__data__,s)>-1}var c=i(12);h.exports=e},function(h,y,i){function e(s,a){var o=this.__data__,n=c(o,s);return n<0?(++this.size,o.push([s,a])):o[n][1]=a,this}var c=i(12);h.exports=e},function(h,y,i){function e(){this.size=0,this.__data__={hash:new c,map:new(a||s),string:new c}}var c=i(84),s=i(10),a=i(33);h.exports=e},function(h,y,i){function e(s){var a=c(this,s).delete(s);return this.size-=a?1:0,a}var c=i(14);h.exports=e},function(h,y,i){function e(s){return c(this,s).get(s)}var c=i(14);h.exports=e},function(h,y,i){function e(s){return c(this,s).has(s)}var c=i(14);h.exports=e},function(h,y,i){function e(s,a){var o=c(this,s),n=o.size;return o.set(s,a),this.size+=o.size==n?0:1,this}var c=i(14);h.exports=e},function(h,y,i){function e(a){var o=c(a,function(t){return n.size===s&&n.clear(),t}),n=o.cache;return o}var c=i(161),s=500;h.exports=e},function(h,y){function i(e){var c=[];if(e!=null)for(var s in Object(e))c.push(s);return c}h.exports=i},function(h,y,i){(function(e){var c=i(38),s=typeof y=="object"&&y&&!y.nodeType&&y,a=s&&typeof e=="object"&&e&&!e.nodeType&&e,o=a&&a.exports===s,n=o&&c.process,t=function(){try{return n&&n.binding&&n.binding("util")}catch{}}();e.exports=t}).call(y,i(29)(h))},function(h,y){function i(s){return c.call(s)}var e=Object.prototype,c=e.toString;h.exports=i},function(h,y){function i(e,c){return function(s){return e(c(s))}}h.exports=i},function(h,y){function i(a){var o=0,n=0;return function(){var t=s(),r=c-(t-n);if(n=t,r>0){if(++o>=e)return arguments[0]}else o=0;return a.apply(void 0,arguments)}}var e=800,c=16,s=Date.now;h.exports=i},function(h,y,i){function e(){this.__data__=new c,this.size=0}var c=i(10);h.exports=e},function(h,y){function i(e){var c=this.__data__,s=c.delete(e);return this.size=c.size,s}h.exports=i},function(h,y){function i(e){return this.__data__.get(e)}h.exports=i},function(h,y){function i(e){return this.__data__.has(e)}h.exports=i},function(h,y,i){function e(n,t){var r=this.__data__;if(r instanceof c){var u=r.__data__;if(!s||u.length<o-1)return u.push([n,t]),this.size=++r.size,this;r=this.__data__=new a(u)}return r.set(n,t),this.size=r.size,this}var c=i(10),s=i(33),a=i(34),o=200;h.exports=e},function(h,y,i){var e=i(143),c=/^\./,s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=e(function(n){var t=[];return c.test(n)&&t.push(""),n.replace(s,function(r,u,f,l){t.push(f?l.replace(a,"$1"):u||r)}),t});h.exports=o},function(h,y){function i(s){if(s!=null){try{return c.call(s)}catch{}try{return s+""}catch{}}return""}var e=Function.prototype,c=e.toString;h.exports=i},function(h,y){function i(e){return function(){return e}}h.exports=i},function(h,y,i){function e(s){return s!=null&&s.length?c(s,1):[]}var c=i(92);h.exports=e},function(h,y,i){function e(a,o){return a!=null&&s(a,o,c)}var c=i(95),s=i(121);h.exports=e},function(h,y,i){function e(a){return s(a)&&c(a)}var c=i(24),s=i(6);h.exports=e},function(h,y,i){function e(l){if(!a(l)||c(l)!=o)return!1;var d=s(l);if(d===null)return!0;var p=u.call(d,"constructor")&&d.constructor;return typeof p=="function"&&p instanceof p&&r.call(p)==f}var c=i(8),s=i(39),a=i(6),o="[object Object]",n=Function.prototype,t=Object.prototype,r=n.toString,u=t.hasOwnProperty,f=r.call(Object);h.exports=e},function(h,y,i){function e(a,o){if(typeof a!="function"||o!=null&&typeof o!="function")throw new TypeError(s);var n=function(){var t=arguments,r=o?o.apply(this,t):t[0],u=n.cache;if(u.has(r))return u.get(r);var f=a.apply(this,t);return n.cache=u.set(r,f)||u,f};return n.cache=new(e.Cache||c),n}var c=i(34),s="Expected a function";e.Cache=c,h.exports=e},function(h,y,i){var e=i(102),c=i(118),s=c(function(a,o){return a==null?{}:e(a,o)});h.exports=s},function(h,y){function i(){return!1}h.exports=i},function(h,y,i){function e(a){return c(a,s(a))}var c=i(114),s=i(46);h.exports=e},function(h,y,i){function e(s){return s==null?"":c(s)}var c=i(108);h.exports=e},function(h,y,i){h.exports=i(48)}])})})(Ae);var ft=Ae.exports;const me=Me(ft);const he=fe=>(ze("data-v-39c1da16"),fe=fe(),je(),fe),dt={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 py-12"},pt={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4"},ht={key:1,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4"},vt={class:"flex justify-between items-center mb-6"},_t=he(()=>k("h2",{class:"text-2xl font-semibold"},"Purchase Management",-1)),gt={class:"flex space-x-4"},yt=he(()=>k("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v1m6 11h2m-6 0h-2m0 0H8m0 0V20m0-6H4m12 0h2M3 3h18M3 21h18"})],-1)),mt=he(()=>k("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[k("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),xt={class:"bg-white shadow-sm rounded-lg overflow-hidden"},bt={class:"min-w-full divide-y divide-gray-200"},Ct=he(()=>k("thead",{class:"bg-gray-50"},[k("tr",null,[k("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Transaction No"),k("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Customer"),k("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Items"),k("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Total Amount"),k("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),k("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Pickup Status"),k("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Date"),k("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),wt={class:"bg-white divide-y divide-gray-200"},Et={class:"px-6 py-4"},Rt={class:"px-6 py-4 whitespace-nowrap"},St={class:"text-sm font-medium text-gray-900"},Ot={class:"px-6 py-4"},At={class:"px-6 py-4"},Tt={class:"px-6 py-4"},Dt={class:"px-6 py-4"},kt={key:0,class:"text-green-600 text-sm font-medium"},Mt={key:1,class:"space-y-2"},Pt=he(()=>k("span",{class:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs font-medium block"}," Ready for Pickup ",-1)),Nt={class:"text-xs text-gray-500"},zt={key:2,class:"text-gray-500 text-sm"},jt={class:"px-6 py-4"},It={class:"px-6 py-4 whitespace-nowrap text-sm font-medium space-y-2"},Ut=["onClick","disabled"],Lt=["onClick","disabled"],Bt=["onClick","disabled"],Ft={key:3,class:"text-sm"},Wt={key:0,class:"text-purple-600 font-medium"},Gt={key:1,class:"text-yellow-600"},Vt={key:2,class:"text-green-600"},$t={key:4,class:"text-sm text-blue-600"},Ht={key:5,class:"text-sm text-green-600 font-medium"},qt={key:6,class:"mt-2 space-y-2"},Xt={class:"flex items-center space-x-2"},Yt=["href"],Kt={key:0,class:"flex space-x-2"},Qt=["onClick"],Zt=["onClick"],Jt={key:0,class:"text-center py-12"},er=he(()=>k("div",{class:"text-gray-500"},"No purchases found",-1)),tr=[er],rr={class:"p-6"},nr=he(()=>k("h2",{class:"text-lg font-medium mb-4"},"Scan Barcode",-1)),or={class:"relative"},ir={id:"interactive",class:"viewport w-full h-[300px] bg-black mb-4"},ar={key:0,class:"absolute inset-0 flex items-center justify-center text-white"},ur={key:0,class:"mb-4 p-4 bg-green-50 rounded-lg"},sr=he(()=>k("p",{class:"text-sm text-gray-600"},"Scanned Code:",-1)),cr={class:"font-medium"},lr={__name:"Index",props:{purchases:{type:Array,default:()=>[]}},setup(fe){const _e=ue(!1),le=ue(!1),h=ue("");ue(null);const y=ue(new Set),i=ue(!1),e=ue(""),c=ue(!0),s=_=>{ae.fire({icon:"success",title:"Success",text:_,timer:2e3,showConfirmButton:!1})};function a(_,x){x?y.value.add(_):y.value.delete(_)}function o(_){return y.value.has(_)}function n(_){ae.fire({title:"Confirm Purchase",text:"Are you sure you want to confirm this purchase?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, confirm it",cancelButtonText:"Cancel"}).then(x=>{x.isConfirmed&&(a(_,!0),xe.post(route("admin.purchase.confirm",_),{},{preserveScroll:!0,onSuccess:()=>{a(_,!1),ae.fire("Confirmed!","Purchase has been confirmed.","success")},onError:()=>{a(_,!1),ae.fire("Error!","Failed to confirm purchase.","error")}}))})}function t(_){ae.fire({title:"Mark as Ready",text:"Mark this purchase as ready for pickup?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, mark as ready",cancelButtonText:"Cancel"}).then(x=>{x.isConfirmed&&(a(_,!0),xe.post(route("admin.purchase.ready",_),{},{preserveScroll:!0,onSuccess:()=>{a(_,!1),ae.fire("Ready!","Purchase marked as ready for pickup.","success")},onError:()=>{a(_,!1),ae.fire("Error!","Failed to mark as ready.","error")}}))})}function r(_){ae.fire({title:"Complete Verification",text:"Confirm that you have verified the user pickup?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, complete verification",cancelButtonText:"Cancel"}).then(x=>{x.isConfirmed&&(a(_,!0),xe.post(route("admin.purchase.verify-pickup",_),{},{preserveScroll:!0,onSuccess:()=>{a(_,!1),ae.fire("Completed!","Purchase has been verified and completed.","success")},onError:()=>{a(_,!1),ae.fire("Error!","Failed to complete verification.","error")}}))})}function u(_){switch(_){case"pending":return"Pending";case"confirmed":return"Confirmed";case"ready_for_pickup":return"Ready for Pickup";case"verified":return"User Verified";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return _}}function f(_,x){const g=x==="verified"?"verify":"reject";ae.fire({title:`${g.charAt(0).toUpperCase()+g.slice(1)} Payment?`,text:`Are you sure you want to ${g} this payment?`,icon:"question",showCancelButton:!0,confirmButtonText:`Yes, ${g}`,cancelButtonText:"Cancel",confirmButtonColor:x==="verified"?"#10B981":"#EF4444"}).then(b=>{b.isConfirmed&&xe.post(route("admin.purchase.verify-payment",_),{status:x},{preserveScroll:!0,onSuccess:()=>{ae.fire({title:"Success!",text:`Payment ${x} successfully.`,icon:"success",timer:2e3,showConfirmButton:!1})},onError:()=>{ae.fire({title:"Error!",text:"Failed to process payment verification.",icon:"error"})}})})}function l(){i.value=!0,c.value=!0,nextTick(()=>{d()})}function d(){me.init({inputStream:{name:"Live",type:"LiveStream",target:document.querySelector("#interactive"),constraints:{width:640,height:480,facingMode:"environment"}},locator:{patchSize:"medium",halfSample:!0},numOfWorkers:2,decoder:{readers:["ean_reader","ean_8_reader","code_128_reader","code_39_reader","upc_reader"]},locate:!0},function(_){if(_){console.error(_),ae.fire({title:"Error",text:"Failed to start camera. Please make sure you have given camera permissions.",icon:"error"});return}me.start(),c.value=!1}),me.onDetected(function(_){_.codeResult.code&&(e.value=_.codeResult.code,new Audio("/sounds/beep.mp3").play(),me.stop())})}function p(){e.value="",c.value=!0,d()}function v(){me.stop(),i.value=!1,e.value="",c.value=!0}return(_,x)=>(q(),Ce(Ie,null,{default:Re(()=>[Se(Pe(Ne),{title:"Purchase Management"}),k("div",dt,[_.$page.props.flash.success?(q(),X("div",pt,ie(_.$page.props.flash.success),1)):J("",!0),_.$page.props.flash.error?(q(),X("div",ht,ie(_.$page.props.flash.error),1)):J("",!0),k("div",vt,[_t,k("div",gt,[k("button",{onClick:l,class:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},[yt,ye(" Scan Barcode ")]),k("button",{onClick:x[0]||(x[0]=g=>_e.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},[mt,ye(" Generate Reports ")])])]),k("div",xt,[k("table",bt,[Ct,k("tbody",wt,[(q(!0),X(ge,null,Oe(fe.purchases,g=>{var b;return q(),X("tr",{key:g.transaction_id,class:"hover:bg-gray-50"},[k("td",Et,ie(g.transaction_number),1),k("td",Rt,[k("div",St,ie(((b=g.user)==null?void 0:b.name)||"Unknown User"),1)]),k("td",Ot,[(q(!0),X(ge,null,Oe(g.items,C=>(q(),X("div",{key:C.id,class:"mb-2"},ie(C.name)+" ("+ie(C.quantity)+"x) - "+ie(C.total_amount),1))),128))]),k("td",At,""+ie(g.total_amount),1),k("td",Tt,[k("span",{class:pe({"px-2 py-1 rounded text-xs font-medium":!0,"bg-yellow-100 text-yellow-800":g.status==="pending","bg-blue-100 text-blue-800":g.status==="confirmed","bg-green-400 text-black-800":g.status==="completed","bg-red-100 text-red-800":g.status==="cancelled"})},ie(u(g.status)),3)]),k("td",Dt,[g.user_pickup_verified&&g.admin_pickup_verified?(q(),X("div",kt," Done ")):g.ready_for_pickup?(q(),X("div",Mt,[Pt,g.pickup_deadline?(q(),X(ge,{key:0},[k("p",Nt," Pickup Before: "+ie(new Date(g.pickup_deadline).toLocaleString()),1),k("p",{class:pe(["text-xs font-medium",{"text-red-600":g.time_remaining==="Expired","text-blue-600":g.time_remaining!=="Expired"}])},ie(g.time_remaining),3)],64)):J("",!0)])):(q(),X("span",zt," Not Ready Yet "))]),k("td",jt,ie(new Date(g.created_at).toLocaleDateString()),1),k("td",It,[g.status==="pending"?(q(),X("button",{key:0,onClick:C=>n(g.transaction_id),disabled:o(g.transaction_id),class:"w-full text-blue-600 hover:text-blue-900 bg-blue-100 px-3 py-1 rounded-full"},ie(o(g.transaction_id)?"Processing...":"Confirm Purchase"),9,Ut)):J("",!0),g.status==="confirmed"?(q(),X("button",{key:1,onClick:C=>t(g.transaction_id),disabled:o(g.transaction_id),class:"w-full text-green-600 hover:text-green-900 bg-green-100 px-3 py-1 rounded-full"},ie(o(g.transaction_id)?"Processing...":"Mark Ready for Pickup"),9,Lt)):J("",!0),g.status==="verified"?(q(),X("button",{key:2,onClick:C=>r(g.transaction_id),disabled:o(g.transaction_id),class:"w-full text-purple-600 hover:text-purple-900 bg-purple-100 px-3 py-1 rounded-full"},ie(o(g.transaction_id)?"Processing...":"Complete Verification"),9,Bt)):J("",!0),g.verification_status?(q(),X("div",Ft,[g.verification_status==="verified_by_user"?(q(),X("span",Wt," User verified pickup - Click to complete ")):J("",!0),g.verification_status==="waiting_user"?(q(),X("span",Gt," Waiting for user verification ")):J("",!0),g.verification_status==="completed"?(q(),X("span",Vt," Pickup Complete  ")):J("",!0)])):J("",!0),g.ready_for_pickup&&!g.user_pickup_verified?(q(),X("div",$t," Waiting for user pickup ")):J("",!0),g.status==="completed"?(q(),X("div",Ht," Order Completed  ")):J("",!0),g.payment_proof?(q(),X("div",qt,[k("div",Xt,[k("span",{class:pe({"text-yellow-600":g.payment_status==="pending","text-green-600":g.payment_status==="verified","text-red-600":g.payment_status==="rejected"})},[g.payment_status==="pending"?(q(),X(ge,{key:0},[ye("  Payment verification needed ")],64)):J("",!0),g.payment_status==="verified"?(q(),X(ge,{key:1},[ye("  Payment verified ")],64)):J("",!0),g.payment_status==="rejected"?(q(),X(ge,{key:2},[ye("  Payment rejected ")],64)):J("",!0)],2),g.payment_proof?(q(),X("a",{key:0,href:g.payment_proof_url,target:"_blank",class:"text-blue-500 hover:text-blue-700 underline text-sm"}," View Proof ",8,Yt)):J("",!0)]),g.payment_status==="pending"?(q(),X("div",Kt,[k("button",{onClick:C=>f(g.transaction_id,"verified"),class:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 text-sm"}," Verify Payment ",8,Qt),k("button",{onClick:C=>f(g.transaction_id,"rejected"),class:"px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm"}," Reject Payment ",8,Zt)])):J("",!0)])):J("",!0)])])}),128))])]),fe.purchases.length?J("",!0):(q(),X("div",Jt,tr))]),_e.value?(q(),Ce(lt,{key:2,onClose:x[1]||(x[1]=g=>_e.value=!1),onSuccess:s})):J("",!0),le.value?(q(),Ce(Ue,{key:3,show:le.value,"receipt-url":h.value,onClose:x[2]||(x[2]=g=>le.value=!1)},null,8,["show","receipt-url"])):J("",!0),Se(Le,{show:i.value,onClose:v,"max-width":"2xl"},{default:Re(()=>[k("div",rr,[nr,k("div",or,[k("div",ir,[c.value?(q(),X("div",ar," Loading camera... ")):J("",!0)])]),e.value?(q(),X("div",ur,[sr,k("p",cr,ie(e.value),1)])):J("",!0),k("div",{class:"flex justify-end space-x-3"},[k("button",{onClick:p,class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600"}," Scan Again "),k("button",{onClick:v,class:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300"}," Close ")])])]),_:1},8,["show"])])]),_:1}))}},mr=Be(lr,[["__scopeId","data-v-39c1da16"]]);export{mr as default};
